<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>OpenShift Origin Branch Build | Cluster Administration | Scheduler</title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css">
  <link href="../../scollier-test/_stylesheets/docs.css" rel="stylesheet" />
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png">
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://assets.openshift.net/content/html5shiv.js" type="text/javascript"></script>
    <script src="https://assets.openshift.net/content/respond.js" type="text/javascript"></script>
    <link href="https://assets.openshift.net/content/vendor/respond-js/respond-proxy.html" id="respond-proxy" rel="respond-proxy">
    <link href="../../scollier-test/_images/respond.proxy.gif" id="respond-redirect" rel="respond-redirect">
    <script src="../../scollier-test/_javascripts/respond.proxy.js" type="text/javascript"></script>
  <![endif]-->
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="../../scollier-test/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script async src="//www.google-analytics.com/analytics.js" type="text/javascript"></script>
<script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-40375612-1', 'openshift.org');
  ga('set', 'forceSSL', true);
  ga('send', 'pageview');
</script>
</head>
<body>
  <div class="navbar navbar-default navbar-openshift navbar-origin" role="navigation">
  <div class="navbar-header">
    <a class="navbar-brand origin" href="/"></a>
  </div>
</div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../index.html">Documentation</a>
      </li>
      <li class="hidden-xs active">
        <a href="../welcome/index.html">OpenShift Origin Branch Build</a>
      </li>
      <li class="hidden-xs active">
        <a href="../admin_guide/index.html">Cluster Administration</a>
      </li>
      
      <li class="hidden-xs active">
        Scheduler
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <div class="row-fluid">
          <script>
  (function() {
    var cx = '013769182564158614814:vdyz7waqya4';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>About
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../welcome/index.html">Welcome</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>What's New?
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../whats_new/index.html">Overview</a></li>
            <li><a class="" href="../whats_new/applications.html">Applications</a></li>
            <li><a class="" href="../whats_new/carts_vs_images.html">Cartridges vs Images</a></li>
            <li><a class="" href="../whats_new/terminology.html">Terminology</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Getting Started
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../getting_started/index.html">Overview</a></li>
            <li><a class="" href="../getting_started/developers_console.html">Web Console Walkthrough</a></li>
            <li><a class="" href="../getting_started/administrators.html">Setting Up a Cluster</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>Architecture
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../architecture/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-1">
                <span id="sgSpan-3-1" class="fa fa-caret-right"></span>&nbsp;Infrastructure Components
              </a>
              <ul id="topicSubGroup-3-1" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../architecture/infrastructure_components/kubernetes_infrastructure.html">Kubernetes Infrastructure</a></li>
                  <li><a class="" href="../architecture/infrastructure_components/image_registry.html">Image Registry</a></li>
                  <li><a class="" href="../architecture/infrastructure_components/web_console.html">Web Console</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-2">
                <span id="sgSpan-3-2" class="fa fa-caret-right"></span>&nbsp;Core Concepts
              </a>
              <ul id="topicSubGroup-3-2" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../architecture/core_concepts/index.html">Overview</a></li>
                  <li><a class="" href="../architecture/core_concepts/containers_and_images.html">Containers and Images</a></li>
                  <li><a class="" href="../architecture/core_concepts/pods_and_services.html">Pods and Services</a></li>
                  <li><a class="" href="../architecture/core_concepts/projects_and_users.html">Projects and Users</a></li>
                  <li><a class="" href="../architecture/core_concepts/builds_and_image_streams.html">Builds and Image Streams</a></li>
                  <li><a class="" href="../architecture/core_concepts/deployments.html">Deployments</a></li>
                  <li><a class="" href="../architecture/core_concepts/routes.html">Routes</a></li>
                  <li><a class="" href="../architecture/core_concepts/templates.html">Templates</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-3">
                <span id="sgSpan-3-3" class="fa fa-caret-right"></span>&nbsp;Additional Concepts
              </a>
              <ul id="topicSubGroup-3-3" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../architecture/additional_concepts/networking.html">Networking</a></li>
                  <li><a class="" href="../architecture/additional_concepts/sdn.html">OpenShift SDN</a></li>
                  <li><a class="" href="../architecture/additional_concepts/authentication.html">Authentication</a></li>
                  <li><a class="" href="../architecture/additional_concepts/authorization.html">Authorization</a></li>
                  <li><a class="" href="../architecture/additional_concepts/storage.html">Persistent Storage</a></li>
                  <li><a class="" href="../architecture/additional_concepts/remote_commands.html">Remote Commands</a></li>
                  <li><a class="" href="../architecture/additional_concepts/port_forwarding.html">Port Forwarding</a></li>
                  <li><a class="" href="../architecture/additional_concepts/throttling.html">Throttling</a></li>
                  <li><a class="" href="../architecture/additional_concepts/scm.html">Source Control Management</a></li>
                  <li><a class="" href="../architecture/additional_concepts/admission_controllers.html">Admission Controllers</a></li>
                  <li><a class="" href="../architecture/additional_concepts/other_api_objects.html">Other API Objects</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-right"></span>Installation and Configuration
      </a>
      <ul id="topicGroup4" class="collapse  list-unstyled">
            <li><a class="" href="../install_config/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-1">
                <span id="sgSpan-4-1" class="fa fa-caret-right"></span>&nbsp;Installing
              </a>
              <ul id="topicSubGroup-4-1" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../install_config/install/index.html">Overview</a></li>
                  <li><a class="" href="../install_config/install/prerequisites.html">Prerequisites</a></li>
                  <li><a class="" href="../install_config/install/rpm_vs_containerized.html">RPM vs Containerized</a></li>
                  <li><a class="" href="../install_config/install/quick_install.html">Quick Installation</a></li>
                  <li><a class="" href="../install_config/install/advanced_install.html">Advanced Installation</a></li>
                  <li><a class="" href="../install_config/install/docker_registry.html">Deploying a Docker Registry</a></li>
                  <li><a class="" href="../install_config/install/deploy_router.html">Deploying a Router</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-2">
                <span id="sgSpan-4-2" class="fa fa-caret-right"></span>&nbsp;Upgrading
              </a>
              <ul id="topicSubGroup-4-2" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../install_config/upgrading/index.html">Overview</a></li>
                  <li><a class="" href="../install_config/upgrading/automated_upgrades.html">Automated Upgrades</a></li>
                  <li><a class="" href="../install_config/upgrading/manual_upgrades.html">Manual Upgrades</a></li>
              </ul>
            </li>
            <li><a class="" href="../install_config/master_node_configuration.html">Master and Node Configuration</a></li>
            <li><a class="" href="../install_config/imagestreams_templates.html">Loading the Default Image Streams and Templates</a></li>
            <li><a class="" href="../install_config/certificate_customization.html">Configuring Custom Certificates</a></li>
            <li><a class="" href="../install_config/configuring_authentication.html">Configuring Authentication and User Agent</a></li>
            <li><a class="" href="../install_config/syncing_groups_with_ldap.html">Syncing Groups With LDAP</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-8">
                <span id="sgSpan-4-8" class="fa fa-caret-right"></span>&nbsp;Advanced LDAP Configuration
              </a>
              <ul id="topicSubGroup-4-8" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../install_config/advanced_ldap_configuration/index.html">Overview</a></li>
                  <li><a class="" href="../install_config/advanced_ldap_configuration/sssd_for_ldap_failover.html">Setting up SSSD for LDAP Failover</a></li>
                  <li><a class="" href="../install_config/advanced_ldap_configuration/configuring_form_based_authentication.html">Configuring Form-Based Authentication</a></li>
                  <li><a class="" href="../install_config/advanced_ldap_configuration/configuring_extended_ldap_attributes.html">Configuring Extended LDAP Attributes</a></li>
              </ul>
            </li>
            <li><a class="" href="../install_config/configuring_sdn.html">Configuring the SDN</a></li>
            <li><a class="" href="../install_config/configuring_aws.html">Configuring for AWS</a></li>
            <li><a class="" href="../install_config/configuring_openstack.html">Configuring for OpenStack</a></li>
            <li><a class="" href="../install_config/configuring_gce.html">Configuring for GCE</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-13">
                <span id="sgSpan-4-13" class="fa fa-caret-right"></span>&nbsp;Configuring Persistent Storage
              </a>
              <ul id="topicSubGroup-4-13" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../install_config/persistent_storage/index.html">Overview</a></li>
                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_nfs.html">Using NFS</a></li>
                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_glusterfs.html">Using GlusterFS</a></li>
                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_cinder.html">Using OpenStack Cinder</a></li>
                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_ceph_rbd.html">Using Ceph RBD</a></li>
                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_aws.html">Using AWS Elastic Block Store</a></li>
                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_gce.html">Using GCE Persistent Disk</a></li>
                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_iscsi.html">Using iSCSI</a></li>
                  <li><a class="" href="../install_config/persistent_storage/persistent_storage_fibre_channel.html">Using Fibre Channel</a></li>
                  <li><a class="" href="../install_config/persistent_storage/dynamically_provisioning_pvs.html">Dynamic Provisioning</a></li>
                  <li><a class="" href="../install_config/persistent_storage/pod_security_context.html">Volume Security</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-14">
                <span id="sgSpan-4-14" class="fa fa-caret-right"></span>&nbsp;Persistent Storage Examples
              </a>
              <ul id="topicSubGroup-4-14" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../install_config/storage_examples/index.html">Overview</a></li>
                  <li><a class="" href="../install_config/storage_examples/shared_storage.html">Sharing an NFS PV Across Two Pods</a></li>
                  <li><a class="" href="../install_config/storage_examples/ceph_example.html">Complete Example Using Ceph RBD</a></li>
                  <li><a class="" href="../install_config/storage_examples/gluster_example.html">Complete Example Using GlusterFS</a></li>
                  <li><a class="" href="../install_config/storage_examples/privileged_pod_storage.html">Mounting Volumes To Privileged Pods</a></li>
                  <li><a class="" href="../install_config/storage_examples/gluster_backed_registry.html">Backing Docker Registry with GlusterFS Storage</a></li>
              </ul>
            </li>
            <li><a class="" href="../install_config/http_proxies.html">Working with HTTP Proxies</a></li>
            <li><a class="" href="../install_config/build_defaults_overrides.html">Configuring Global Build Defaults and Overrides</a></li>
            <li><a class="" href="../install_config/configuring_pipeline_execution.html">Configuring Build Pipeline Execution</a></li>
            <li><a class="" href="../install_config/native_container_routing.html">Native Container Routing</a></li>
            <li><a class="" href="../install_config/routing_from_edge_lb.html">Routing from Edge Load Balancers</a></li>
            <li><a class="" href="../install_config/aggregate_logging.html">Aggregating Container Logs</a></li>
            <li><a class="" href="../install_config/cluster_metrics.html">Enabling Cluster Metrics</a></li>
            <li><a class="" href="../install_config/web_console_customization.html">Customizing the Web Console</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-down"></span>Cluster Administration
      </a>
      <ul id="topicGroup5" class="collapse in list-unstyled">
            <li><a class="" href="../admin_guide/index.html">Overview</a></li>
            <li><a class="" href="../admin_guide/manage_nodes.html">Managing Nodes</a></li>
            <li><a class="" href="../admin_guide/manage_users.html">Managing Users</a></li>
            <li><a class="" href="../admin_guide/managing_projects.html">Managing Projects</a></li>
            <li><a class="" href="../admin_guide/service_accounts.html">Configuring Service Accounts</a></li>
            <li><a class="" href="../admin_guide/manage_authorization_policy.html">Managing Authorization Policies</a></li>
            <li><a class="" href="../admin_guide/scoped_tokens.html">Scoped Tokens</a></li>
            <li><a class="" href="../admin_guide/manage_scc.html">Managing Security Context Constraints</a></li>
            <li><a class="" href="../admin_guide/quota.html">Setting Quotas</a></li>
            <li><a class="" href="../admin_guide/limits.html">Setting Limit Ranges</a></li>
            <li><a class="" href="../admin_guide/pruning_resources.html">Pruning Objects</a></li>
            <li><a class="" href="../admin_guide/garbage_collection.html">Garbage Collection</a></li>
            <li><a class=" active" href="../admin_guide/scheduler.html">Scheduler</a></li>
            <li><a class="" href="../admin_guide/allocating_node_resources.html">Allocating Node Resources</a></li>
            <li><a class="" href="../admin_guide/overcommit.html">Overcommitting</a></li>
            <li><a class="" href="../admin_guide/limit_runonce_pod_duration.html">Limit Run-once Pod Duration</a></li>
            <li><a class="" href="../admin_guide/router.html">Monitoring Routers</a></li>
            <li><a class="" href="../admin_guide/high_availability.html">High Availability</a></li>
            <li><a class="" href="../admin_guide/pod_network.html">Managing Pod Networks</a></li>
            <li><a class="" href="../admin_guide/iptables.html">IPtables</a></li>
            <li><a class="" href="../admin_guide/securing_builds.html">Securing Builds by Strategy</a></li>
            <li><a class="" href="../admin_guide/building_dependency_trees.html">Building Dependency Trees</a></li>
            <li><a class="" href="../admin_guide/sdn_troubleshooting.html">Troubleshooting Networking</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup6">
        <span id="tgSpan6" class="fa fa-angle-right"></span>CLI Reference
      </a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../cli_reference/index.html">Overview</a></li>
            <li><a class="" href="../cli_reference/get_started_cli.html">Get Started with the CLI</a></li>
            <li><a class="" href="../cli_reference/manage_cli_profiles.html">Managing CLI Profiles</a></li>
            <li><a class="" href="../cli_reference/basic_cli_operations.html">Developer CLI Operations</a></li>
            <li><a class="" href="../cli_reference/admin_cli_operations.html">Administrator CLI Operations</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup7">
        <span id="tgSpan7" class="fa fa-angle-right"></span>Developer Guide
      </a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../dev_guide/index.html">Overview</a></li>
            <li><a class="" href="../dev_guide/application_lifecycle.html">Application Life Cycle Examples</a></li>
            <li><a class="" href="../dev_guide/authentication.html">Authentication</a></li>
            <li><a class="" href="../dev_guide/projects.html">Projects</a></li>
            <li><a class="" href="../dev_guide/new_app.html">Creating New Applications</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-7-5">
                <span id="sgSpan-7-5" class="fa fa-caret-right"></span>&nbsp;Application Tutorials
              </a>
              <ul id="topicSubGroup-7-5" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../dev_guide/app_tutorials/index.html">Overview</a></li>
                  <li><a class="" href="../dev_guide/app_tutorials/quickstarts.html">Quickstart Templates</a></li>
                  <li><a class="" href="../dev_guide/app_tutorials/ruby_on_rails.html">Ruby on Rails</a></li>
              </ul>
            </li>
            <li><a class="" href="../dev_guide/ssh_environment.html">Opening a Remote Shell to Containers</a></li>
            <li><a class="" href="../dev_guide/templates.html">Templates</a></li>
            <li><a class="" href="../dev_guide/service_accounts.html">Service Accounts</a></li>
            <li><a class="" href="../dev_guide/builds.html">Builds</a></li>
            <li><a class="" href="../dev_guide/managing_images.html">Managing Images</a></li>
            <li><a class="" href="../dev_guide/compute_resources.html">Quotas and Limit Ranges</a></li>
            <li><a class="" href="../dev_guide/deployments.html">Deployments</a></li>
            <li><a class="" href="../dev_guide/routes.html">Routes</a></li>
            <li><a class="" href="../dev_guide/integrating_external_services.html">Integrating External Services</a></li>
            <li><a class="" href="../dev_guide/secrets.html">Secrets</a></li>
            <li><a class="" href="../dev_guide/configmaps.html">ConfigMaps</a></li>
            <li><a class="" href="../dev_guide/pod_autoscaling.html">Pod Autoscaling</a></li>
            <li><a class="" href="../dev_guide/volumes.html">Managing Volumes</a></li>
            <li><a class="" href="../dev_guide/persistent_volumes.html">Using Persistent Volumes</a></li>
            <li><a class="" href="../dev_guide/executing_remote_commands.html">Executing Remote Commands</a></li>
            <li><a class="" href="../dev_guide/copy_files_to_container.html">Copying Files</a></li>
            <li><a class="" href="../dev_guide/port_forwarding.html">Port Forwarding</a></li>
            <li><a class="" href="../dev_guide/shared_memory.html">Shared Memory</a></li>
            <li><a class="" href="../dev_guide/application_health.html">Application Health</a></li>
            <li><a class="" href="../dev_guide/events.html">Events</a></li>
            <li><a class="" href="../dev_guide/downward_api.html">Downward API</a></li>
            <li><a class="" href="../dev_guide/environment_variables.html">Managing Environment Variables</a></li>
            <li><a class="" href="../dev_guide/jobs.html">Jobs</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup8">
        <span id="tgSpan8" class="fa fa-angle-right"></span>Creating Images
      </a>
      <ul id="topicGroup8" class="collapse  list-unstyled">
            <li><a class="" href="../creating_images/index.html">Overview</a></li>
            <li><a class="" href="../creating_images/guidelines.html">Guidelines</a></li>
            <li><a class="" href="../creating_images/metadata.html">Image Metadata</a></li>
            <li><a class="" href="../creating_images/s2i.html">S2I Requirements</a></li>
            <li><a class="" href="../creating_images/s2i_testing.html">Testing S2I Images</a></li>
            <li><a class="" href="../creating_images/custom.html">Custom Builder</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup9">
        <span id="tgSpan9" class="fa fa-angle-right"></span>Using Images
      </a>
      <ul id="topicGroup9" class="collapse  list-unstyled">
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-0">
                <span id="sgSpan-9-0" class="fa fa-caret-right"></span>&nbsp;Source-to-Image (S2I)
              </a>
              <ul id="topicSubGroup-9-0" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../using_images/s2i_images/index.html">Overview</a></li>
                  <li><a class="" href="../using_images/s2i_images/nodejs.html">Node.js</a></li>
                  <li><a class="" href="../using_images/s2i_images/ruby.html">Ruby</a></li>
                  <li><a class="" href="../using_images/s2i_images/perl.html">Perl</a></li>
                  <li><a class="" href="../using_images/s2i_images/php.html">PHP</a></li>
                  <li><a class="" href="../using_images/s2i_images/python.html">Python</a></li>
                  <li><a class="" href="../using_images/s2i_images/java.html">Java</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-1">
                <span id="sgSpan-9-1" class="fa fa-caret-right"></span>&nbsp;Database Images
              </a>
              <ul id="topicSubGroup-9-1" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../using_images/db_images/index.html">Overview</a></li>
                  <li><a class="" href="../using_images/db_images/mysql.html">MySQL</a></li>
                  <li><a class="" href="../using_images/db_images/postgresql.html">PostgreSQL</a></li>
                  <li><a class="" href="../using_images/db_images/mongodb.html">MongoDB</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-2">
                <span id="sgSpan-9-2" class="fa fa-caret-right"></span>&nbsp;Docker Images
              </a>
              <ul id="topicSubGroup-9-2" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../using_images/docker_images/index.html">Overview</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-3">
                <span id="sgSpan-9-3" class="fa fa-caret-right"></span>&nbsp;Other Images
              </a>
              <ul id="topicSubGroup-9-3" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../using_images/other_images/index.html">Overview</a></li>
                  <li><a class="" href="../using_images/other_images/jenkins.html">Jenkins</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup10">
        <span id="tgSpan10" class="fa fa-angle-right"></span>REST API Reference
      </a>
      <ul id="topicGroup10" class="collapse  list-unstyled">
            <li><a class="" href="../rest_api/index.html">Overview</a></li>
            <li><a class="" href="../rest_api/openshift_v1.html">OpenShift v1</a></li>
            <li><a class="" href="../rest_api/kubernetes_v1.html">Kubernetes v1</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup11">
        <span id="tgSpan11" class="fa fa-angle-right"></span>OpenShift on AWS
      </a>
      <ul id="topicGroup11" class="collapse  list-unstyled">
            <li><a class="" href="../scollier-aws/appendix.html">Appendix</a></li>
            <li><a class="" href="../scollier-aws/ch1_execsummary.html">Executive Summary</a></li>
            <li><a class="" href="../scollier-aws/ch2_ami.html">AMI Configuration</a></li>
            <li><a class="" href="../scollier-aws/ch2_bastion.html">Bastion Host</a></li>
            <li><a class="" href="../scollier-aws/ch2_components-and-configuration.html">Components and Configuration</a></li>
            <li><a class="" href="../scollier-aws/ch2_dynamic_inventory.html">Dynami Inventory</a></li>
            <li><a class="" href="../scollier-aws/ch2_google-oauth.html">Google Authentication</a></li>
            <li><a class="" href="../scollier-aws/ch2_iam.html">IAM Configuration</a></li>
            <li><a class="" href="../scollier-aws/ch2_load_balancers.html">Load Balancers</a></li>
            <li><a class="" href="../scollier-aws/ch2_nat-gateway.html">NAT Gateway Configuration</a></li>
            <li><a class="" href="../scollier-aws/ch2_nodes.html">Node Configuration</a></li>
            <li><a class="" href="../scollier-aws/ch2_registry.html">Registry Conifguration</a></li>
            <li><a class="" href="../scollier-aws/ch2_route53.html">Route53 DNS Configuration</a></li>
            <li><a class="" href="../scollier-aws/ch2_router.html">Router Configuration</a></li>
            <li><a class="" href="../scollier-aws/ch2_s3.html">S3 Storage Configuration</a></li>
            <li><a class="" href="../scollier-aws/ch2_security-groups.html">Security Groups</a></li>
            <li><a class="" href="../scollier-aws/ch2_ssh.html">SSH Configuration</a></li>
            <li><a class="" href="../scollier-aws/ch2_vpc.html">VPC Configuration</a></li>
            <li><a class="" href="../scollier-aws/ch3_deploying-with-ansible.html">Deploy with Ansible</a></li>
            <li><a class="" href="../scollier-aws/ch3_deploying-with-bash.html">Deploy with Bash</a></li>
            <li><a class="" href="../scollier-aws/ch3_provision-infrastructure.html">Provision the Infrastructure</a></li>
            <li><a class="" href="../scollier-aws/ch4_deploying-ose.html">Deploy OpenShift Container Platform</a></li>
            <li><a class="" href="../scollier-aws/ch5_post-deployment-actions.html">Post Deployment Activities</a></li>
            <li><a class="" href="../scollier-aws/ch6_operational-mgmt.html">Operational Management</a></li>
            <li><a class="" href="../scollier-aws/ch7_conclusion.html">Conclustion</a></li>
            <li><a class="" href="../scollier-aws/commentsfeedback.html">Feedback</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>Scheduler</h2>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#generic-scheduler">Generic Scheduler</a>
<ul class="sectlevel2">
<li><a href="#filter-the-nodes">Filter the Nodes</a></li>
<li><a href="#prioritize-the-filtered-list-of-nodes">Prioritize the Filtered List of Nodes</a></li>
<li><a href="#select-the-best-fit-node">Select the Best Fit Node</a></li>
</ul>
</li>
<li><a href="#available-predicates">Available Predicates</a>
<ul class="sectlevel2">
<li><a href="#static-predicates">Static Predicates</a></li>
<li><a href="#configurable-predicates">Configurable Predicates</a></li>
</ul>
</li>
<li><a href="#available-priority-functions">Available Priority Functions</a>
<ul class="sectlevel2">
<li><a href="#static-priority-functions">Static Priority Functions</a></li>
<li><a href="#configurable-priority-functions">Configurable Priority Functions</a></li>
</ul>
</li>
<li><a href="#scheduler-policy">Scheduler Policy</a>
<ul class="sectlevel2">
<li><a href="#default-scheduler-policy">Default Scheduler Policy</a></li>
<li><a href="#modifying-scheduler-policy">Modifying Scheduler Policy</a></li>
</ul>
</li>
<li><a href="#use-cases">Use Cases</a>
<ul class="sectlevel2">
<li><a href="#anti-affinity">Anti Affinity</a></li>
</ul>
</li>
<li><a href="#scheduler-sample-policies">Sample Policy Configurations</a></li>
<li><a href="#scheduler-extensibility">Scheduler Extensibility</a>
<ul class="sectlevel2">
<li><a href="#enhancements">Enhancements</a></li>
<li><a href="#replacement">Replacement</a></li>
</ul>
</li>
<li><a href="#controlling-pod-placement">Controlling Pod Placement</a>
<ul class="sectlevel2">
<li><a href="#constraining-pod-placement-labels">Constraining Pod Placement Using Node Name</a></li>
<li><a href="#constraining-pod-placement-nodeselector">Constraining Pod Placement Using a Node Selector</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Kubernetes pod scheduler is responsible for determining placement of new
pods onto nodes within the cluster. It reads data from the pod and tries to find
a node that is a good fit based on configured policies. It is completely
independent and exists as a standalone/pluggable solution. It does not modify
the pod and just creates a binding for the pod that ties the pod to the
particular node.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generic-scheduler"><a class="anchor" href="#generic-scheduler"></a>Generic Scheduler</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The existing generic scheduler is the default platform-provided scheduler
"engine" that selects a node to host the pod in a 3-step operation:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Filter the nodes</p>
</li>
<li>
<p>Prioritize the filtered list of nodes</p>
</li>
<li>
<p>Select the best fit node</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="filter-the-nodes"><a class="anchor" href="#filter-the-nodes"></a>Filter the Nodes</h3>
<div class="paragraph">
<p>The available nodes are filtered based on the constraints or requirements
specified. This is done by running each of the nodes through the list of filter
functions called 'predicates'.</p>
</div>
</div>
<div class="sect2">
<h3 id="prioritize-the-filtered-list-of-nodes"><a class="anchor" href="#prioritize-the-filtered-list-of-nodes"></a>Prioritize the Filtered List of Nodes</h3>
<div class="paragraph">
<p>This is achieved by passing each node through a series of 'priority' functions
that assign it a score between 0 - 10, with 0 indicating a bad fit and 10
indicating a good fit to host the pod. The scheduler configuration can also take
in a simple "weight" (positive numeric value) for each priority function. The
node score provided by each priority function is multiplied by the "weight"
(default weight is 1) and then combined by just adding the scores for each node
provided by all the priority functions. This weight attribute can be used by
administrators to give higher importance to some priority functions.</p>
</div>
</div>
<div class="sect2">
<h3 id="select-the-best-fit-node"><a class="anchor" href="#select-the-best-fit-node"></a>Select the Best Fit Node</h3>
<div class="paragraph">
<p>The nodes are sorted based on their scores and the node with the highest score
is selected to host the pod. If multiple nodes have the same high score, then
one of them is selected at random.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="available-predicates"><a class="anchor" href="#available-predicates"></a>Available Predicates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several predicates provided out of the box in Kubernetes. Some of
these predicates can be customized by providing certain parameters. Multiple
predicates can be combined to provide additional filtering of nodes.</p>
</div>
<div class="sect2">
<h3 id="static-predicates"><a class="anchor" href="#static-predicates"></a>Static Predicates</h3>
<div class="paragraph">
<p>These predicates do not take any configuration parameters or inputs from the
user. These are specified in the scheduler configuration using their exact
name.</p>
</div>
<div class="paragraph">
<p><strong><em>PodFitsPorts</em></strong> deems a node to be fit for hosting a pod based on the absence
of port conflicts.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "PodFitsPorts"}</pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>PodFitsResources</em></strong> determines a fit based on resource availability. The
nodes can declare their resource capacities and then pods can specify what
resources they require. Fit is based on requested, rather than used
resources.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "PodFitsResources"}</pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>NoDiskConflict</em></strong> determines fit based on non-conflicting disk volumes.
It evaluates if a pod can fit due to the volumes it requests, and those that are
already mounted. It is GCE and Amazon EBS specific.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "NoDiskConflict"}</pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>MatchNodeSelector</em></strong> determines fit based on node selector query that is
defined in the pod.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "MatchNodeSelector"}</pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>HostName</em></strong> determines fit based on the presence of the Host parameter
and a string match with the name of the host.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "HostName"}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configurable-predicates"><a class="anchor" href="#configurable-predicates"></a>Configurable Predicates</h3>
<div class="paragraph">
<p>These predicates can be configured by the user to tweak their functioning. They
can be given any user-defined name. The type of the predicate is identified by
the argument that they take. Since these are configurable, multiple predicates
of the same type (but different configuration parameters) can be combined as
long as their user-defined names are different.</p>
</div>
<div class="paragraph">
<p><strong><em>ServiceAffinity</em></strong> filters out nodes that do not belong to the specified
topological level defined by the provided labels. This predicate takes in a list
of labels and ensures affinity within the nodes (that have the same label
values) for pods belonging to the same service. If the pod specifies a value for
the labels in its NodeSelector, then the nodes matching those labels are the
ones where the pod is scheduled. If the pod does not specify the labels in its
NodeSelector, then the first pod can be placed on any node based on availability
and all subsequent pods of the service will be scheduled on nodes that have the
same label values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "Zone", "argument" : {"serviceAffinity" : {"labels" : ["zone"]}}}</pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>LabelsPresence</em></strong> checks whether a particular node has a certain label
defined or not, regardless of its value. Matching by label can be useful, for
example, where nodes have their physical location or status defined by labels.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "RequireRegion", "argument" : {"labelsPresence" : {"labels" : ["region"], "presence" : true}}}</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>If "presence" is false, and any of the requested labels match any of the
nodes&#8217;s labels, it returns false. Otherwise, it returns true.</p>
</li>
<li>
<p>If "presence" is true, and any of the requested labels do not match any of
the node&#8217;s labels, it returns false. Otherwise, it returns true.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="available-priority-functions"><a class="anchor" href="#available-priority-functions"></a>Available Priority Functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A custom set of priority functions can be specified to configure the scheduler.
There are several priority functions provided out-of-the-box in Kubernetes.
Some of these priority functions can be customized by providing certain
parameters. Multiple priority functions can be combined and different weights
can be given to each in order to impact the prioritization. A weight is required
to be specified and cannot be 0 or negative.</p>
</div>
<div class="sect2">
<h3 id="static-priority-functions"><a class="anchor" href="#static-priority-functions"></a>Static Priority Functions</h3>
<div class="paragraph">
<p>These priority functions do not take any configuration parameters or inputs from
the user. These are specified in the scheduler configuration using their exact
name as well as the weight.</p>
</div>
<div class="paragraph">
<p><strong><em>LeastRequestedPriority</em></strong> favors nodes with fewer requested resources. It
calculates the percentage of memory and CPU requested by pods scheduled on the
node, and prioritizes nodes that have the highest available/remaining capacity.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "LeastRequestedPriority", "weight" : 1}</pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>BalancedResourceAllocation</em></strong> favors nodes with balanced resource usage rate.
It calculates the difference between the consumed CPU and memory as a fraction
of capacity, and prioritizes the nodes based on how close the two metrics are to
each other. This should always be used together with <em>LeastRequestedPriority</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "BalancedResourceAllocation", "weight" : 1}</pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>ServiceSpreadingPriority</em></strong> spreads pods by minimizing the number of pods
belonging to the same service onto the same machine.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "ServiceSpreadingPriority", "weight" : 1}</pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>EqualPriority</em></strong> gives an equal weight of one to all nodes, if no priority
configs are provided. It is not required/recommended outside of testing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "EqualPriority", "weight" : 1}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configurable-priority-functions"><a class="anchor" href="#configurable-priority-functions"></a>Configurable Priority Functions</h3>
<div class="paragraph">
<p>These priority functions can be configured by the user by providing certain
parameters.  They can be given any user-defined name. The type of the priority
function is identified by the argument that they take. Since these are
configurable, multiple priority functions of the same type (but different
configuration parameters) can be combined as long as their user-defined names
are different.</p>
</div>
<div class="paragraph">
<p><strong><em>ServiceAntiAffinity</em></strong> takes a label and ensures a good spread of the pods
belonging to the same service across the group of nodes based on the label
values. It gives the same score to all nodes that have the same value for the
specified label. It gives a higher score to nodes within a group with the least
concentration of pods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "RackSpread", "weight" : 1, "argument" : {"serviceAntiAffinity" : {"label" : "rack"}}}</pre>
</div>
</div>
<div class="paragraph">
<p><strong><em>LabelPreference</em></strong> prefers nodes that have a particular label defined or not,
regardless of its value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"name" : "RackPreferred", "weight" : 1, "argument" : {"labelPreference" : {"label" : "rack"}}}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scheduler-policy"><a class="anchor" href="#scheduler-policy"></a>Scheduler Policy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The selection of the predicate and priority functions defines the policy for the
scheduler. Administrators can provide a JSON file that specifies the predicates
and priority functions to configure the scheduler. The path to the scheduler
policy file can be specified in the master configuration file. In the absence of
the scheduler policy file, the default configuration gets applied.</p>
</div>
<div class="paragraph">
<p>It is important to note that the predicates and priority functions defined in
the scheduler configuration file will completely override the default scheduler
policy. If any of the default predicates and priority functions are required,
they have to be explicitly specified in the scheduler configuration file.</p>
</div>
<div class="sect2">
<h3 id="default-scheduler-policy"><a class="anchor" href="#default-scheduler-policy"></a>Default Scheduler Policy</h3>
<div class="paragraph">
<p>The default scheduler policy includes the following predicates:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>PodFitsPorts</p>
</li>
<li>
<p>PodFitsResources</p>
</li>
<li>
<p>NoDiskConflict</p>
</li>
<li>
<p>MatchNodeSelector</p>
</li>
<li>
<p>HostName</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The default scheduler policy includes the following priority functions.
Each of the priority function has a weight of '1' applied to it:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>LeastRequestedPriority</p>
</li>
<li>
<p>BalancedResourceAllocation</p>
</li>
<li>
<p>ServiceSpreadingPriority</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="modifying-scheduler-policy"><a class="anchor" href="#modifying-scheduler-policy"></a>Modifying Scheduler Policy</h3>
<div class="paragraph">
<p>The scheduler policy is defined in a file on the master,
named <strong><em>/etc/origin/master/scheduler.json</em></strong> by default,
unless overridden by the <code>kubernetesMasterConfig.schedulerConfigFile</code>
field in the
<a href="../install_config/master_node_configuration.html#master-configuration-files">master configuration file</a>.</p>
</div>
<div class="paragraph">
<p>To modify the scheduler policy:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the scheduler configuration file to set the desired
<a href="#default-scheduler-policy">predicates and priority functions</a>.
You can create a custom configuration, or modify one of the
<a href="#scheduler-sample-policies">sample policy configurations</a>.</p>
</li>
<li>
<p>Restart the OpenShift Origin
<a href="../install_config/master_node_configuration.html#launching-servers-using-configuration-files">master services</a>
for the changes to take effect.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="use-cases"><a class="anchor" href="#use-cases"></a>Use Cases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the important use cases for scheduling within OpenShift Origin is to
support flexible affinity and anti-affinity policies.
=== Infrastructure Topological Levels
Administrators can define multiple topological levels for their infrastructure
(nodes).
This is done by specifying
<a href="../admin_guide/manage_nodes.html#updating-labels-on-nodes">labels on nodes</a>
(e.g., <code>region=r1</code>, <code>zone=z1</code>, <code>rack=s1</code>).
These label names have no particular meaning and
administrators are free to name their infrastructure levels anything
(eg, city/building/room). Also, administrators can define any number of levels
for their infrastructure topology, with three levels usually being adequate
(eg. regions &#8594; zones &#8594; racks).  Lastly, administrators can specify affinity
and anti-affinity rules at each of these levels in any combination.
=== Affinity
Administrators should be able to configure the scheduler to specify affinity at
any topological level, or even at multiple levels. Affinity at a particular
level indicates that all pods that belong to the same service will be scheduled
onto nodes that belong to the same level. This handles any latency requirements
of applications by allowing administrators to ensure that peer pods do not end
up being too geographically separated. If no node is available within the same
affinity group to host the pod, then the pod will not get scheduled.</p>
</div>
<div class="sect2">
<h3 id="anti-affinity"><a class="anchor" href="#anti-affinity"></a>Anti Affinity</h3>
<div class="paragraph">
<p>Administrators should be able to configure the scheduler to specify
anti-affinity at any topological level, or even at multiple levels.
Anti-Affinity (or 'spread') at a particular level indicates that all pods that
belong to the same service will be spread across nodes that belong to that
level. This ensures that the application is well spread for high availability
purposes. The scheduler will try to balance the service pods across all
applicable nodes as evenly as possible.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scheduler-sample-policies"><a class="anchor" href="#scheduler-sample-policies"></a>Sample Policy Configurations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The configuration below specifies the default scheduler configuration, if it
were to be specified via the scheduler policy file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kind: "Policy"
version: "v1"
predicates:
  - name: "PodFitsPorts"
  - name: "PodFitsResources"
  - name: "NoDiskConflict"
  - name: "MatchNodeSelector"
  - name: "HostName"
priorities:
  - name: "LeastRequestedPriority"
    weight: 1
  - name: "BalancedResourceAllocation"
    weight: 1
  - name: "ServiceSpreadingPriority"
    weight: 1</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In all of the sample configurations below, the list of predicates and priority
functions is truncated to include only the ones that pertain to the use case
specified.  In practice, a complete/meaningful scheduler policy should include
most, if not all, of the default predicates and priority functions listed above.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Three topological levels defined as region (affinity) -&#8594; zone (affinity) -&#8594; rack (anti-affinity)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kind: "Policy"
version: "v1"
predicates:
...
  - name: "RegionZoneAffinity"
    argument:
      serviceAffinity:
        labels:
          - "region"
          - "zone"
priorities:
...
  - name: "RackSpread"
    weight: 1
    argument:
      serviceAntiAffinity:
        label: "rack"</pre>
</div>
</div>
<div class="paragraph">
<p>Three topological levels defined as city (affinity) &#8594; building
(anti-affinity) &#8594; room (anti-affinity):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kind: "Policy"
version: "v1"
predicates:
...
  - name: "CityAffinity"
    argument:
      serviceAffinity:
        labels:
          - "city"
priorities:
...
  - name: "BuildingSpread"
    weight: 1
    argument:
      serviceAntiAffinity:
        label: "building"
  - name: "RoomSpread"
    weight: 1
    argument:
      serviceAntiAffinity:
        label: "room"</pre>
</div>
</div>
<div class="paragraph">
<p>Only use nodes with the 'region' label defined and prefer nodes with the 'zone'
label defined:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kind: "Policy"
version: "v1"
predicates:
...
  - name: "RequireRegion"
    argument:
      labelsPresence:
        labels:
          - "region"
        presence: true
priorities:
...
  - name: "ZonePreferred"
    weight: 1
    argument:
      labelPreference:
        label: "zone"
        presence: true</pre>
</div>
</div>
<div class="paragraph">
<p>Configuration example combining static and configurable predicates and
priority functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kind: "Policy"
version: "v1"
predicates:
...
  - name: "RegionAffinity"
    argument:
      serviceAffinity:
        labels:
          - "region"
  - name: "RequireRegion"
    argument:
      labelsPresence:
        labels:
          - "region"
        presence: true
  - name: "BuildingNodesAvoid"
    argument:
      labelsPresence:
        labels:
          - "building"
        presence: false
  - name: "PodFitsPorts"
  - name: "MatchNodeSelector"
priorities:
...
  - name: "ZoneSpread"
    weight: 2
    argument:
      serviceAntiAffinity:
        label: "zone"
  - name: "ZonePreferred"
    weight: 1
    argument:
      labelPreference:
        label: "zone"
        presence: true
  - name: "ServiceSpreadingPriority"
    weight: 1</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scheduler-extensibility"><a class="anchor" href="#scheduler-extensibility"></a>Scheduler Extensibility</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As is the case with almost everything else in Kubernetes/OpenShift Origin, the
scheduler is built using a plug-in model and the current implementation itself
is a plug-in. There are two ways to extend the scheduler functionality:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enhancements</p>
</li>
<li>
<p>Replacement</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="enhancements"><a class="anchor" href="#enhancements"></a>Enhancements</h3>
<div class="paragraph">
<p>The scheduler functionality can be enhanced by adding new predicates and
priority functions. They can either be contributed upstream or maintained
separately. These predicates and priority functions would need to be registered
with the scheduler factory and then specified in the scheduler policy file.</p>
</div>
</div>
<div class="sect2">
<h3 id="replacement"><a class="anchor" href="#replacement"></a>Replacement</h3>
<div class="paragraph">
<p>Since the scheduler is a plug-in, it can be replaced in favor of an alternate
implementation. The scheduler code has a clean separation that watches new pods
as they get created and identifies the most suitable node to host them. It then
creates bindings (pod to node bindings) for the pods using the master API.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="controlling-pod-placement"><a class="anchor" href="#controlling-pod-placement"></a>Controlling Pod Placement</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As a cluster administrator, you can set a policy to prevent application
developers with certain roles from targeting specific nodes when scheduling
pods.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This process involves the <strong>pods/binding</strong> permission
<a href="../admin_guide/manage_authorization_policy.html#admin-guide-manage-authorization-policy">role</a>, which is needed to
target particular nodes. The constraint on the use of the <code>nodeSelector</code> field
of a pod configuration is based on the <strong>pods/binding</strong> permission and the
<code>nodeSelectorLabelBlacklist</code> configuration option.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>nodeSelectorLabelBlacklist</code> field of a master configuration file gives you
control over the labels that certain roles can specify in a pod configuration&#8217;s
<code>nodeSelector</code> field. Users, service accounts, and groups that have the
<strong>pods/binding</strong> permission can specify any node selector. Those without the
<strong>pods/binding</strong> permission are prohibited from setting a <code>nodeSelector</code> for any
label that appears in <code>nodeSelectorLabelBlacklist</code>.</p>
</div>
<div class="paragraph">
<p>As a hypothetical example, an OpenShift Origin cluster might consist of five data
centers spread across two regions. In the U.S., "us-east", "us-central", and
"us-west"; and in the Asia-Pacific region (APAC), "apac-east" and "apac-west".
Each node in each geographical region is labeled accordingly. For example,
<code>region: us-east</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>See <a href="../admin_guide/manage_nodes.html#updating-labels-on-nodes">Updating
Labels on Nodes</a> for details on assigning labels.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As a cluster administrator, you can create an infrastructure where application
developers should be deploying pods only onto the nodes closest to their
geographical location. You can
<a href="../admin_guide/managing_projects.html#using-node-selectors">create a node
selector</a>, grouping the U.S. data centers into <code>superregion: us</code> and the APAC
data centers into <code>superregion: apac</code>.</p>
</div>
<div class="paragraph">
<p>To maintain an even loading of resources per data center, you can add the
desired <code>region</code> to the <code>nodeSelectorLabelBlacklist</code> section of a master
configuration. Then, whenever a developer located in the U.S. creates a pod, it
is deployed onto a node in one of the regions with the <code>superregion: us</code> label.
If the developer tries to target a specific region for their pod (for example,
<code>region: us-east</code>), they will receive an error. If they try again, without the
node selector on their pod, it can still be deployed onto the region they tried
to target, because <code>superregion: us</code> is set as the project-level node selector,
and nodes labeled <code>region: us-east</code> are also labeled <code>superregion: us</code>.</p>
</div>
<div class="sect2">
<h3 id="constraining-pod-placement-labels"><a class="anchor" href="#constraining-pod-placement-labels"></a>Constraining Pod Placement Using Node Name</h3>
<div class="paragraph">
<p>Ensure a pod is deployed onto only a specified node host by assigning it a label
and specifying this in the <code>nodeName</code> setting in a pod configuration.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure you have the desired labels and
<a href="../admin_guide/managing_projects.html#using-node-selectors">node selector</a>
set up in your environment.</p>
<div class="paragraph">
<p>For example, make sure that your pod configuration features the <code>nodeName</code>
value indicating the desired label:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apiVersion: v1
kind: Pod
spec:
  nodeName: &lt;key: value&gt;</pre>
</div>
</div>
</li>
<li>
<p>Modify the master configuration file
(<strong><em>/etc/origin/master/master-config.yaml</em></strong>) in two places:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Add <code>nodeSelectorLabelBlacklist</code> to the <code>admissionConfig</code> section:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>...
admissionConfig:
  pluginConfig:
    PodNodeConstraints:
      configuration:
        apiversion: v1
        kind: PodNodeConstraintsConfig
...</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Then, add the same to the <code>kubernetesMasterConfig</code> section to restrict direct pod creation:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>...
kubernetesMasterConfig:
  admissionConfig:
    pluginConfig:
      PodNodeConstraints:
        configuration:
          apiVersion: v1
          kind: PodNodeConstraintsConfig
...</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Restart OpenShift Origin for the changes to take effect.</p>
<div class="listingblock">
<div class="content">
<pre># systemctl restart origin-master</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="constraining-pod-placement-nodeselector"><a class="anchor" href="#constraining-pod-placement-nodeselector"></a>Constraining Pod Placement Using a Node Selector</h3>
<div class="paragraph">
<p>Using <code>nodeSelector</code> in a pod configuration, you can ensure that pods are only
placed onto nodes with specific labels.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure you have the desired labels
(see <a href="../admin_guide/manage_nodes.html#updating-labels-on-nodes">Updating
Labels on Nodes</a> for details)
and <a href="../admin_guide/managing_projects.html#using-node-selectors">node selector</a>
set up in your environment.</p>
<div class="paragraph">
<p>For example, make sure that your pod configuration features the <code>nodeSelector</code>
value indicating the desired label:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>apiVersion: v1
kind: Pod
spec:
  nodeSelector:
    &lt;key&gt;: &lt;value&gt;
...</pre>
</div>
</div>
</li>
<li>
<p>Modify the master configuration file
(<strong><em>/etc/origin/master/master-config.yaml</em></strong>) in two places:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Add <code>nodeSelectorLabelBlacklist</code> to the <code>admissionConfig</code> section with
the labels that are assigned to the node hosts you want to deny pod placement:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>...
admissionConfig:
  pluginConfig:
    PodNodeConstraints:
      configuration:
        apiversion: v1
        kind: PodNodeConstraintsConfig
        nodeSelectorLabelBlacklist:
          - kubernetes.io/hostname
          - &lt;label&gt;
...</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Then, add the same to the <code>kubernetesMasterConfig</code> section to restrict direct pod creation:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>...
kubernetesMasterConfig:
  admissionConfig:
    pluginConfig:
      PodNodeConstraints:
        configuration:
          apiVersion: v1
          kind: PodNodeConstraintsConfig
          nodeSelectorLabelBlacklist:
            - kubernetes.io/hostname
            - &lt;label_1&gt;
...</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Restart OpenShift Origin for the changes to take effect.</p>
<div class="listingblock">
<div class="content">
<pre># systemctl restart origin-master</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
    <footer class="footer-origin-docs">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <div id="footer_social">
          <a href="https://twitter.com/openshift" class="first">
            <span>
              <i class="fa fa-twitter-square fa-2x fa-inverse"></i>
            </span>
          </a>
          <a href="https://github.com/openshift/origin">
            <span>
              <i class="fa fa-github fa-2x fa-inverse"></i>
            </span>
          </a>
          <a href="https://plus.google.com/communities/114361859072744017486">
            <span>
              <i class="fa fa-google-plus-square fa-2x fa-inverse"></i>
            </span>
          </a>
          <a href="https://www.facebook.com/openshift">
            <span>
              <i class="fa fa-facebook-square fa-2x fa-inverse"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-sm-4">
        <a id="footer_logo" href="https://www.redhat.com/">
          <img alt="Red Hat" src="https://assets.openshift.net/app/assets/redhat.svg">
        </a>
      </div>
      <div class="col-xs-12 col-sm-4 text-center">
        <a id="powered_by_openshift" title="Powered by OpenShift Online with the DIY Cartridge" href="https://hub.openshift.com/quickstarts/92-do-it-yourself-0-1">
          <img src="https://www.openshift.com/sites/default/files/images/powered-transparent-white.png" alt="Powered by OpenShift Online">
        </a>
      </div>
      <div class="col-xs-12 col-sm-4 text-right">
        <a id="built_with_asciibinder" title="Built with AsciiBinder docs management system" href="http://asciibinder.org/">
          <img src="../../scollier-test/_images/asciibinder_web_logo.svg" alt="AsciiBinder">
        </a>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <div class="attribution">
          <button type="button" class="btn btn-link" data-html="true" data-container="body" data-toggle="popover" data-placement="top" data-content="
            '<a target='_blank' href='https://www.flickr.com/photos/eflon/3655695161/'>Spin</a>' by <a target='_blank' href='https://www.flickr.com/photos/eflon/'>eflon</a>,</br> used under <a target='_blank' href='https://creativecommons.org/licenses/by/2.0/'>CC BY 2.0</a> </br>Color tint added to original">
            Image attribution
          </button>
        </div>
      </div>
    </div>
    <script>
    $(function () {
      $('[data-toggle="popover"]').popover()
    })
    </script>
  </div>
</footer>
</body>
</html>
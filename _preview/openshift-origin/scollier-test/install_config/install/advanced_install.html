<!DOCTYPE html>
<!--[if IE 8]> <html class="ie8"> <![endif]-->
<!--[if IE 9]> <html class="ie9"> <![endif]-->
<!--[if gt IE 9]><!-->
<html>
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>OpenShift Origin Branch Build | Installation and Configuration | Installing | Advanced Installation</title>
  <link href="https://assets.openshift.net/content/subdomain.css" rel="stylesheet" type="text/css">
  <link href="../../../scollier-test/_stylesheets/docs.css" rel="stylesheet" />
  <link href="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" rel="apple-touch-icon-precomposed" type="image/png">
  <link href="https://assets.openshift.net/content/subdomain/favicon32x32.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="https://assets.openshift.net/content/subdomain/favicon.ico"><![endif]-->
  <!-- or, set /favicon.ico for IE10 win -->
  <meta content="OpenShift" name="application-name">
  <meta content="#000000" name="msapplication-TileColor">
  <meta content="https://assets.openshift.net/content/subdomain/touch-icon-precomposed.png" name="msapplication-TileImage">
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://assets.openshift.net/content/html5shiv.js" type="text/javascript"></script>
    <script src="https://assets.openshift.net/content/respond.js" type="text/javascript"></script>
    <link href="https://assets.openshift.net/content/vendor/respond-js/respond-proxy.html" id="respond-proxy" rel="respond-proxy">
    <link href="../../../scollier-test/_images/respond.proxy.gif" id="respond-redirect" rel="respond-redirect">
    <script src="../../../scollier-test/_javascripts/respond.proxy.js" type="text/javascript"></script>
  <![endif]-->
  <script src="https://assets.openshift.net/content/modernizr.js" type="text/javascript"></script>
  <script src="https://assets.openshift.net/content/subdomain.js" type="text/javascript"></script>
  <script src="../../../scollier-test/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
  <script async src="//www.google-analytics.com/analytics.js" type="text/javascript"></script>
<script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-40375612-1', 'openshift.org');
  ga('set', 'forceSSL', true);
  ga('send', 'pageview');
</script>
</head>
<body>
  <div class="navbar navbar-default navbar-openshift navbar-origin" role="navigation">
  <div class="navbar-header">
    <a class="navbar-brand origin" href="/"></a>
  </div>
</div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../../index.html">Documentation</a>
      </li>
      <li class="hidden-xs active">
        <a href="../../welcome/index.html">OpenShift Origin Branch Build</a>
      </li>
      <li class="hidden-xs active">
        <a href="../../install_config/index.html">Installation and Configuration</a>
      </li>
      <li class="hidden-xs active"><a href="../../install_config/install/index.html">Installing</a></li>
      <li class="hidden-xs active">
        Advanced Installation
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <div class="row-fluid">
          <script>
  (function() {
    var cx = '013769182564158614814:vdyz7waqya4';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
        </div>
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>About
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../../welcome/index.html">Welcome</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>What's New?
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../../whats_new/index.html">Overview</a></li>
            <li><a class="" href="../../whats_new/applications.html">Applications</a></li>
            <li><a class="" href="../../whats_new/carts_vs_images.html">Cartridges vs Images</a></li>
            <li><a class="" href="../../whats_new/terminology.html">Terminology</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Getting Started
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../../getting_started/index.html">Overview</a></li>
            <li><a class="" href="../../getting_started/developers_console.html">Web Console Walkthrough</a></li>
            <li><a class="" href="../../getting_started/administrators.html">Setting Up a Cluster</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>Architecture
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../../architecture/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-1">
                <span id="sgSpan-3-1" class="fa fa-caret-right"></span>&nbsp;Infrastructure Components
              </a>
              <ul id="topicSubGroup-3-1" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../architecture/infrastructure_components/kubernetes_infrastructure.html">Kubernetes Infrastructure</a></li>
                  <li><a class="" href="../../architecture/infrastructure_components/image_registry.html">Image Registry</a></li>
                  <li><a class="" href="../../architecture/infrastructure_components/web_console.html">Web Console</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-2">
                <span id="sgSpan-3-2" class="fa fa-caret-right"></span>&nbsp;Core Concepts
              </a>
              <ul id="topicSubGroup-3-2" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../architecture/core_concepts/index.html">Overview</a></li>
                  <li><a class="" href="../../architecture/core_concepts/containers_and_images.html">Containers and Images</a></li>
                  <li><a class="" href="../../architecture/core_concepts/pods_and_services.html">Pods and Services</a></li>
                  <li><a class="" href="../../architecture/core_concepts/projects_and_users.html">Projects and Users</a></li>
                  <li><a class="" href="../../architecture/core_concepts/builds_and_image_streams.html">Builds and Image Streams</a></li>
                  <li><a class="" href="../../architecture/core_concepts/deployments.html">Deployments</a></li>
                  <li><a class="" href="../../architecture/core_concepts/routes.html">Routes</a></li>
                  <li><a class="" href="../../architecture/core_concepts/templates.html">Templates</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-3-3">
                <span id="sgSpan-3-3" class="fa fa-caret-right"></span>&nbsp;Additional Concepts
              </a>
              <ul id="topicSubGroup-3-3" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../architecture/additional_concepts/networking.html">Networking</a></li>
                  <li><a class="" href="../../architecture/additional_concepts/sdn.html">OpenShift SDN</a></li>
                  <li><a class="" href="../../architecture/additional_concepts/authentication.html">Authentication</a></li>
                  <li><a class="" href="../../architecture/additional_concepts/authorization.html">Authorization</a></li>
                  <li><a class="" href="../../architecture/additional_concepts/storage.html">Persistent Storage</a></li>
                  <li><a class="" href="../../architecture/additional_concepts/remote_commands.html">Remote Commands</a></li>
                  <li><a class="" href="../../architecture/additional_concepts/port_forwarding.html">Port Forwarding</a></li>
                  <li><a class="" href="../../architecture/additional_concepts/throttling.html">Throttling</a></li>
                  <li><a class="" href="../../architecture/additional_concepts/scm.html">Source Control Management</a></li>
                  <li><a class="" href="../../architecture/additional_concepts/admission_controllers.html">Admission Controllers</a></li>
                  <li><a class="" href="../../architecture/additional_concepts/other_api_objects.html">Other API Objects</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-down"></span>Installation and Configuration
      </a>
      <ul id="topicGroup4" class="collapse in list-unstyled">
            <li><a class="" href="../../install_config/index.html">Overview</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-1">
                <span id="sgSpan-4-1" class="fa fa-caret-down"></span>&nbsp;Installing
              </a>
              <ul id="topicSubGroup-4-1" class="nav-tertiary list-unstyled collapse in">
                  <li><a class="" href="../../install_config/install/index.html">Overview</a></li>
                  <li><a class="" href="../../install_config/install/prerequisites.html">Prerequisites</a></li>
                  <li><a class="" href="../../install_config/install/rpm_vs_containerized.html">RPM vs Containerized</a></li>
                  <li><a class="" href="../../install_config/install/quick_install.html">Quick Installation</a></li>
                  <li><a class=" active" href="../../install_config/install/advanced_install.html">Advanced Installation</a></li>
                  <li><a class="" href="../../install_config/install/docker_registry.html">Deploying a Docker Registry</a></li>
                  <li><a class="" href="../../install_config/install/deploy_router.html">Deploying a Router</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-2">
                <span id="sgSpan-4-2" class="fa fa-caret-right"></span>&nbsp;Upgrading
              </a>
              <ul id="topicSubGroup-4-2" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../install_config/upgrading/index.html">Overview</a></li>
                  <li><a class="" href="../../install_config/upgrading/automated_upgrades.html">Automated Upgrades</a></li>
                  <li><a class="" href="../../install_config/upgrading/manual_upgrades.html">Manual Upgrades</a></li>
              </ul>
            </li>
            <li><a class="" href="../../install_config/master_node_configuration.html">Master and Node Configuration</a></li>
            <li><a class="" href="../../install_config/imagestreams_templates.html">Loading the Default Image Streams and Templates</a></li>
            <li><a class="" href="../../install_config/certificate_customization.html">Configuring Custom Certificates</a></li>
            <li><a class="" href="../../install_config/configuring_authentication.html">Configuring Authentication and User Agent</a></li>
            <li><a class="" href="../../install_config/syncing_groups_with_ldap.html">Syncing Groups With LDAP</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-8">
                <span id="sgSpan-4-8" class="fa fa-caret-right"></span>&nbsp;Advanced LDAP Configuration
              </a>
              <ul id="topicSubGroup-4-8" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../install_config/advanced_ldap_configuration/index.html">Overview</a></li>
                  <li><a class="" href="../../install_config/advanced_ldap_configuration/sssd_for_ldap_failover.html">Setting up SSSD for LDAP Failover</a></li>
                  <li><a class="" href="../../install_config/advanced_ldap_configuration/configuring_form_based_authentication.html">Configuring Form-Based Authentication</a></li>
                  <li><a class="" href="../../install_config/advanced_ldap_configuration/configuring_extended_ldap_attributes.html">Configuring Extended LDAP Attributes</a></li>
              </ul>
            </li>
            <li><a class="" href="../../install_config/configuring_sdn.html">Configuring the SDN</a></li>
            <li><a class="" href="../../install_config/configuring_aws.html">Configuring for AWS</a></li>
            <li><a class="" href="../../install_config/configuring_openstack.html">Configuring for OpenStack</a></li>
            <li><a class="" href="../../install_config/configuring_gce.html">Configuring for GCE</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-13">
                <span id="sgSpan-4-13" class="fa fa-caret-right"></span>&nbsp;Configuring Persistent Storage
              </a>
              <ul id="topicSubGroup-4-13" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../install_config/persistent_storage/index.html">Overview</a></li>
                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_nfs.html">Using NFS</a></li>
                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_glusterfs.html">Using GlusterFS</a></li>
                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_cinder.html">Using OpenStack Cinder</a></li>
                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_ceph_rbd.html">Using Ceph RBD</a></li>
                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_aws.html">Using AWS Elastic Block Store</a></li>
                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_gce.html">Using GCE Persistent Disk</a></li>
                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_iscsi.html">Using iSCSI</a></li>
                  <li><a class="" href="../../install_config/persistent_storage/persistent_storage_fibre_channel.html">Using Fibre Channel</a></li>
                  <li><a class="" href="../../install_config/persistent_storage/dynamically_provisioning_pvs.html">Dynamic Provisioning</a></li>
                  <li><a class="" href="../../install_config/persistent_storage/pod_security_context.html">Volume Security</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-4-14">
                <span id="sgSpan-4-14" class="fa fa-caret-right"></span>&nbsp;Persistent Storage Examples
              </a>
              <ul id="topicSubGroup-4-14" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../install_config/storage_examples/index.html">Overview</a></li>
                  <li><a class="" href="../../install_config/storage_examples/shared_storage.html">Sharing an NFS PV Across Two Pods</a></li>
                  <li><a class="" href="../../install_config/storage_examples/ceph_example.html">Complete Example Using Ceph RBD</a></li>
                  <li><a class="" href="../../install_config/storage_examples/gluster_example.html">Complete Example Using GlusterFS</a></li>
                  <li><a class="" href="../../install_config/storage_examples/privileged_pod_storage.html">Mounting Volumes To Privileged Pods</a></li>
                  <li><a class="" href="../../install_config/storage_examples/gluster_backed_registry.html">Backing Docker Registry with GlusterFS Storage</a></li>
              </ul>
            </li>
            <li><a class="" href="../../install_config/http_proxies.html">Working with HTTP Proxies</a></li>
            <li><a class="" href="../../install_config/build_defaults_overrides.html">Configuring Global Build Defaults and Overrides</a></li>
            <li><a class="" href="../../install_config/configuring_pipeline_execution.html">Configuring Build Pipeline Execution</a></li>
            <li><a class="" href="../../install_config/native_container_routing.html">Native Container Routing</a></li>
            <li><a class="" href="../../install_config/routing_from_edge_lb.html">Routing from Edge Load Balancers</a></li>
            <li><a class="" href="../../install_config/aggregate_logging.html">Aggregating Container Logs</a></li>
            <li><a class="" href="../../install_config/cluster_metrics.html">Enabling Cluster Metrics</a></li>
            <li><a class="" href="../../install_config/web_console_customization.html">Customizing the Web Console</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>Cluster Administration
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../../admin_guide/index.html">Overview</a></li>
            <li><a class="" href="../../admin_guide/manage_nodes.html">Managing Nodes</a></li>
            <li><a class="" href="../../admin_guide/manage_users.html">Managing Users</a></li>
            <li><a class="" href="../../admin_guide/managing_projects.html">Managing Projects</a></li>
            <li><a class="" href="../../admin_guide/service_accounts.html">Configuring Service Accounts</a></li>
            <li><a class="" href="../../admin_guide/manage_authorization_policy.html">Managing Authorization Policies</a></li>
            <li><a class="" href="../../admin_guide/scoped_tokens.html">Scoped Tokens</a></li>
            <li><a class="" href="../../admin_guide/manage_scc.html">Managing Security Context Constraints</a></li>
            <li><a class="" href="../../admin_guide/quota.html">Setting Quotas</a></li>
            <li><a class="" href="../../admin_guide/limits.html">Setting Limit Ranges</a></li>
            <li><a class="" href="../../admin_guide/pruning_resources.html">Pruning Objects</a></li>
            <li><a class="" href="../../admin_guide/garbage_collection.html">Garbage Collection</a></li>
            <li><a class="" href="../../admin_guide/scheduler.html">Scheduler</a></li>
            <li><a class="" href="../../admin_guide/allocating_node_resources.html">Allocating Node Resources</a></li>
            <li><a class="" href="../../admin_guide/overcommit.html">Overcommitting</a></li>
            <li><a class="" href="../../admin_guide/limit_runonce_pod_duration.html">Limit Run-once Pod Duration</a></li>
            <li><a class="" href="../../admin_guide/router.html">Monitoring Routers</a></li>
            <li><a class="" href="../../admin_guide/high_availability.html">High Availability</a></li>
            <li><a class="" href="../../admin_guide/pod_network.html">Managing Pod Networks</a></li>
            <li><a class="" href="../../admin_guide/iptables.html">IPtables</a></li>
            <li><a class="" href="../../admin_guide/securing_builds.html">Securing Builds by Strategy</a></li>
            <li><a class="" href="../../admin_guide/building_dependency_trees.html">Building Dependency Trees</a></li>
            <li><a class="" href="../../admin_guide/sdn_troubleshooting.html">Troubleshooting Networking</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup6">
        <span id="tgSpan6" class="fa fa-angle-right"></span>CLI Reference
      </a>
      <ul id="topicGroup6" class="collapse  list-unstyled">
            <li><a class="" href="../../cli_reference/index.html">Overview</a></li>
            <li><a class="" href="../../cli_reference/get_started_cli.html">Get Started with the CLI</a></li>
            <li><a class="" href="../../cli_reference/manage_cli_profiles.html">Managing CLI Profiles</a></li>
            <li><a class="" href="../../cli_reference/basic_cli_operations.html">Developer CLI Operations</a></li>
            <li><a class="" href="../../cli_reference/admin_cli_operations.html">Administrator CLI Operations</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup7">
        <span id="tgSpan7" class="fa fa-angle-right"></span>Developer Guide
      </a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../../dev_guide/index.html">Overview</a></li>
            <li><a class="" href="../../dev_guide/application_lifecycle.html">Application Life Cycle Examples</a></li>
            <li><a class="" href="../../dev_guide/authentication.html">Authentication</a></li>
            <li><a class="" href="../../dev_guide/projects.html">Projects</a></li>
            <li><a class="" href="../../dev_guide/new_app.html">Creating New Applications</a></li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-7-5">
                <span id="sgSpan-7-5" class="fa fa-caret-right"></span>&nbsp;Application Tutorials
              </a>
              <ul id="topicSubGroup-7-5" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../dev_guide/app_tutorials/index.html">Overview</a></li>
                  <li><a class="" href="../../dev_guide/app_tutorials/quickstarts.html">Quickstart Templates</a></li>
                  <li><a class="" href="../../dev_guide/app_tutorials/ruby_on_rails.html">Ruby on Rails</a></li>
              </ul>
            </li>
            <li><a class="" href="../../dev_guide/ssh_environment.html">Opening a Remote Shell to Containers</a></li>
            <li><a class="" href="../../dev_guide/templates.html">Templates</a></li>
            <li><a class="" href="../../dev_guide/service_accounts.html">Service Accounts</a></li>
            <li><a class="" href="../../dev_guide/builds.html">Builds</a></li>
            <li><a class="" href="../../dev_guide/managing_images.html">Managing Images</a></li>
            <li><a class="" href="../../dev_guide/compute_resources.html">Quotas and Limit Ranges</a></li>
            <li><a class="" href="../../dev_guide/deployments.html">Deployments</a></li>
            <li><a class="" href="../../dev_guide/routes.html">Routes</a></li>
            <li><a class="" href="../../dev_guide/integrating_external_services.html">Integrating External Services</a></li>
            <li><a class="" href="../../dev_guide/secrets.html">Secrets</a></li>
            <li><a class="" href="../../dev_guide/configmaps.html">ConfigMaps</a></li>
            <li><a class="" href="../../dev_guide/pod_autoscaling.html">Pod Autoscaling</a></li>
            <li><a class="" href="../../dev_guide/volumes.html">Managing Volumes</a></li>
            <li><a class="" href="../../dev_guide/persistent_volumes.html">Using Persistent Volumes</a></li>
            <li><a class="" href="../../dev_guide/executing_remote_commands.html">Executing Remote Commands</a></li>
            <li><a class="" href="../../dev_guide/copy_files_to_container.html">Copying Files</a></li>
            <li><a class="" href="../../dev_guide/port_forwarding.html">Port Forwarding</a></li>
            <li><a class="" href="../../dev_guide/shared_memory.html">Shared Memory</a></li>
            <li><a class="" href="../../dev_guide/application_health.html">Application Health</a></li>
            <li><a class="" href="../../dev_guide/events.html">Events</a></li>
            <li><a class="" href="../../dev_guide/downward_api.html">Downward API</a></li>
            <li><a class="" href="../../dev_guide/environment_variables.html">Managing Environment Variables</a></li>
            <li><a class="" href="../../dev_guide/jobs.html">Jobs</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup8">
        <span id="tgSpan8" class="fa fa-angle-right"></span>Creating Images
      </a>
      <ul id="topicGroup8" class="collapse  list-unstyled">
            <li><a class="" href="../../creating_images/index.html">Overview</a></li>
            <li><a class="" href="../../creating_images/guidelines.html">Guidelines</a></li>
            <li><a class="" href="../../creating_images/metadata.html">Image Metadata</a></li>
            <li><a class="" href="../../creating_images/s2i.html">S2I Requirements</a></li>
            <li><a class="" href="../../creating_images/s2i_testing.html">Testing S2I Images</a></li>
            <li><a class="" href="../../creating_images/custom.html">Custom Builder</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup9">
        <span id="tgSpan9" class="fa fa-angle-right"></span>Using Images
      </a>
      <ul id="topicGroup9" class="collapse  list-unstyled">
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-0">
                <span id="sgSpan-9-0" class="fa fa-caret-right"></span>&nbsp;Source-to-Image (S2I)
              </a>
              <ul id="topicSubGroup-9-0" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../using_images/s2i_images/index.html">Overview</a></li>
                  <li><a class="" href="../../using_images/s2i_images/nodejs.html">Node.js</a></li>
                  <li><a class="" href="../../using_images/s2i_images/ruby.html">Ruby</a></li>
                  <li><a class="" href="../../using_images/s2i_images/perl.html">Perl</a></li>
                  <li><a class="" href="../../using_images/s2i_images/php.html">PHP</a></li>
                  <li><a class="" href="../../using_images/s2i_images/python.html">Python</a></li>
                  <li><a class="" href="../../using_images/s2i_images/java.html">Java</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-1">
                <span id="sgSpan-9-1" class="fa fa-caret-right"></span>&nbsp;Database Images
              </a>
              <ul id="topicSubGroup-9-1" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../using_images/db_images/index.html">Overview</a></li>
                  <li><a class="" href="../../using_images/db_images/mysql.html">MySQL</a></li>
                  <li><a class="" href="../../using_images/db_images/postgresql.html">PostgreSQL</a></li>
                  <li><a class="" href="../../using_images/db_images/mongodb.html">MongoDB</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-2">
                <span id="sgSpan-9-2" class="fa fa-caret-right"></span>&nbsp;Docker Images
              </a>
              <ul id="topicSubGroup-9-2" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../using_images/docker_images/index.html">Overview</a></li>
              </ul>
            </li>
            <li class="nav-header">
              <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicSubGroup-9-3">
                <span id="sgSpan-9-3" class="fa fa-caret-right"></span>&nbsp;Other Images
              </a>
              <ul id="topicSubGroup-9-3" class="nav-tertiary list-unstyled collapse">
                  <li><a class="" href="../../using_images/other_images/index.html">Overview</a></li>
                  <li><a class="" href="../../using_images/other_images/jenkins.html">Jenkins</a></li>
              </ul>
            </li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup10">
        <span id="tgSpan10" class="fa fa-angle-right"></span>REST API Reference
      </a>
      <ul id="topicGroup10" class="collapse  list-unstyled">
            <li><a class="" href="../../rest_api/index.html">Overview</a></li>
            <li><a class="" href="../../rest_api/openshift_v1.html">OpenShift v1</a></li>
            <li><a class="" href="../../rest_api/kubernetes_v1.html">Kubernetes v1</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="javascript:void(0);" data-toggle="collapse" data-target="#topicGroup11">
        <span id="tgSpan11" class="fa fa-angle-right"></span>OpenShift on AWS
      </a>
      <ul id="topicGroup11" class="collapse  list-unstyled">
            <li><a class="" href="../../scollier-aws/appendix.html">Appendix</a></li>
            <li><a class="" href="../../scollier-aws/ch1_execsummary.html">Executive Summary</a></li>
            <li><a class="" href="../../scollier-aws/ch2_ami.html">AMI Configuration</a></li>
            <li><a class="" href="../../scollier-aws/ch2_bastion.html">Bastion Host</a></li>
            <li><a class="" href="../../scollier-aws/ch2_components-and-configuration.html">Components and Configuration</a></li>
            <li><a class="" href="../../scollier-aws/ch2_dynamic_inventory.html">Dynami Inventory</a></li>
            <li><a class="" href="../../scollier-aws/ch2_google-oauth.html">Google Authentication</a></li>
            <li><a class="" href="../../scollier-aws/ch2_iam.html">IAM Configuration</a></li>
            <li><a class="" href="../../scollier-aws/ch2_load_balancers.html">Load Balancers</a></li>
            <li><a class="" href="../../scollier-aws/ch2_nat-gateway.html">NAT Gateway Configuration</a></li>
            <li><a class="" href="../../scollier-aws/ch2_nodes.html">Node Configuration</a></li>
            <li><a class="" href="../../scollier-aws/ch2_registry.html">Registry Conifguration</a></li>
            <li><a class="" href="../../scollier-aws/ch2_route53.html">Route53 DNS Configuration</a></li>
            <li><a class="" href="../../scollier-aws/ch2_router.html">Router Configuration</a></li>
            <li><a class="" href="../../scollier-aws/ch2_s3.html">S3 Storage Configuration</a></li>
            <li><a class="" href="../../scollier-aws/ch2_security-groups.html">Security Groups</a></li>
            <li><a class="" href="../../scollier-aws/ch2_ssh.html">SSH Configuration</a></li>
            <li><a class="" href="../../scollier-aws/ch2_vpc.html">VPC Configuration</a></li>
            <li><a class="" href="../../scollier-aws/ch3_deploying-with-ansible.html">Deploy with Ansible</a></li>
            <li><a class="" href="../../scollier-aws/ch3_deploying-with-bash.html">Deploy with Bash</a></li>
            <li><a class="" href="../../scollier-aws/ch3_provision-infrastructure.html">Provision the Infrastructure</a></li>
            <li><a class="" href="../../scollier-aws/ch4_deploying-ose.html">Deploy OpenShift Container Platform</a></li>
            <li><a class="" href="../../scollier-aws/ch5_post-deployment-actions.html">Post Deployment Activities</a></li>
            <li><a class="" href="../../scollier-aws/ch6_operational-mgmt.html">Operational Management</a></li>
            <li><a class="" href="../../scollier-aws/ch7_conclusion.html">Conclustion</a></li>
            <li><a class="" href="../../scollier-aws/commentsfeedback.html">Feedback</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>Advanced Installation</h2>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#overview">Overview</a></li>
<li><a href="#advanced-before-you-begin">Before You Begin</a></li>
<li><a href="#configuring-ansible">Configuring Ansible</a>
<ul class="sectlevel2">
<li><a href="#configuring-host-variables">Configuring Host Variables</a></li>
<li><a href="#configuring-cluster-variables">Configuring Cluster Variables</a></li>
<li><a href="#advanced-install-configuring-global-proxy">Configuring Global Proxy Options</a></li>
<li><a href="#configuring-node-host-labels">Configuring Node Host Labels</a></li>
<li><a href="#marking-masters-as-unschedulable-nodes">Marking Masters as Unschedulable Nodes</a></li>
<li><a href="#advanced-install-session-options">Configuring Session Options</a></li>
<li><a href="#advanced-install-custom-certificates">Configuring Custom Certificates</a></li>
</ul>
</li>
<li><a href="#single-master">Single Master Examples</a></li>
<li><a href="#multiple-masters">Multiple Masters Examples</a></li>
<li><a href="#running-the-advanced-installation">Running the Advanced Installation</a></li>
<li><a href="#advanced-verifying-the-installation">Verifying the Installation</a></li>
<li><a href="#adding-nodes-advanced">Adding Nodes to an Existing Cluster</a></li>
<li><a href="#uninstalling-advanced">Uninstalling OpenShift Origin</a>
<ul class="sectlevel2">
<li><a href="#uninstalling-nodes-advanced">Uninstalling Nodes</a></li>
</ul>
</li>
<li><a href="#installer-known-issues">Known Issues</a></li>
<li><a href="#what-s-next">What&#8217;s Next?</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For production environments, a reference configuration implemented using
<a href="http://www.ansible.com">Ansible</a> playbooks is available as the <em>advanced
installation</em> method for installing OpenShift Origin hosts. Familiarity with Ansible is
assumed, however you can use this configuration as a reference to create your
own implementation using the configuration management tool of your choosing.</p>
</div>
<div class="paragraph">
<p>While RHEL Atomic Host is supported for running containerized OpenShift Origin
services, the advanced installation method utilizes Ansible, which is not
available in RHEL Atomic Host, and must therefore be run from
a supported version of Fedora, CentOS, or RHEL.
The host initiating the installation does not need to be intended for inclusion
in the OpenShift Origin cluster, but it can be.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-before-you-begin"><a class="anchor" href="#advanced-before-you-begin"></a>Before You Begin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before installing OpenShift Origin, you must first see the <a href="../../install_config/install/prerequisites.html#install-config-install-prerequisites">Prerequisites</a> topic to
prepare your hosts, which includes verifying system and environment requirements
per component type and properly installing and configuring Docker. It also
includes installing Ansible version 1.8.4 or later, as the advanced installation
method is based on Ansible playbooks and as such requires directly invoking
Ansible.</p>
</div>
<div class="paragraph">
<p>If you are interested in installing OpenShift Origin using the containerized method
(optional for RHEL but required for RHEL Atomic Host), see
<a href="../../install_config/install/rpm_vs_containerized.html#install-config-install-rpm-vs-containerized">RPM vs
Containerized</a> to ensure that you understand the differences between these
methods, then return to this topic to continue.</p>
</div>
<div class="paragraph">
<p>After following the instructions in the
<a href="../../install_config/install/prerequisites.html#install-config-install-prerequisites">Prerequisites</a> topic and
deciding between the RPM and containerized methods, you can continue in this
topic to <a href="#configuring-ansible">Configuring Ansible</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-ansible"><a class="anchor" href="#configuring-ansible"></a>Configuring Ansible</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong><em>/etc/ansible/hosts</em></strong> file is Ansible&#8217;s inventory file for the playbook to
use during the installation. The inventory file describes the configuration for
your OpenShift Origin cluster. You must replace the default contents of the file
with your desired configuration.</p>
</div>
<div class="paragraph">
<p>The following sections describe commonly-used variables to set in your inventory
file during an advanced installation, followed by example inventory files you
can use as a starting point for your installation. The examples describe various
environment topographies, including <a href="#multiple-masters">using multiple
masters for high availability</a>. You can choose an example that matches your
requirements, modify it to match your own environment, and use it as your
inventory file when <a href="#running-the-advanced-installation">running the advanced
installation</a>.</p>
</div>
<div class="sect2">
<h3 id="configuring-host-variables"><a class="anchor" href="#configuring-host-variables"></a>Configuring Host Variables</h3>
<div class="paragraph">
<p>To assign environment variables to hosts during the Ansible installation, indicate
the desired variables in the <strong><em>/etc/ansible/hosts</em></strong> file after the host entry in
the <strong>[masters]</strong> or <strong>[nodes]</strong> sections. For example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">[masters]
ec2-52-6-179-239.compute-1.amazonaws.com openshift_public_hostname=ose3-master.public.example.com</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following table describes variables for use with the Ansible installer that
can be assigned to individual host entries:</p>
</div>
<table id="advanced-host-variables" class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Host Variables</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_hostname</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable overrides the internal cluster host name for the system. Use this
when the system&#8217;s default IP address does not resolve to the system host name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_public_hostname</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable overrides the system&#8217;s public host name. Use this for cloud
installations, or for hosts on networks using a network address translation
(NAT).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_ip</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable overrides the cluster internal IP address for the system. Use
this when using an interface that is not configured with the default route.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_public_ip</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable overrides the system&#8217;s public IP address. Use this for cloud
installations, or for hosts on networks using a network address translation
(NAT).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>containerized</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <strong>true</strong>, containerized OpenShift Origin services are run on target master and
node hosts instead of installed using RPM packages. If set to <strong>false</strong> or unset,
the default RPM method is used. RHEL Atomic Host requires the containerized
method, and is automatically selected for you based on the detection of the
<strong><em>/run/ostree-booted</em></strong> file. See
<a href="../../install_config/install/rpm_vs_containerized.html#install-config-install-rpm-vs-containerized">RPM vs
Containerized</a> for more details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_node_labels</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable adds labels to nodes during installation. See
<a href="#configuring-node-host-labels">Configuring Node Host Labels</a> for more
details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_node_kubelet_args</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable is used to configure <code>kubeletArguments</code> on nodes, such as
arguments used in <a href="../../admin_guide/garbage_collection.html#admin-guide-garbage-collection">container and
image garbage collection</a>, and to
<a href="../../admin_guide/manage_nodes.html#configuring-node-resources">specify
resources per node</a>. <code>kubeletArguments</code> are key value pairs that are passed
directly to the Kubelet that match the
<a href="http://kubernetes.io/v1.1/docs/admin/kubelet.html">Kubelet&#8217;s command line
arguments</a>. <code>kubeletArguments</code> are not migrated or validated and may become
invalid if used. These values override other settings in node configuration
which may cause invalid configurations. Example usage:
<strong>{'image-gc-high-threshold': ['90'],'image-gc-low-threshold': ['80']}</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_hosted_router_selector</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default node selector for automatically deploying router pods. See
<a href="#configuring-node-host-labels">Configuring Node Host Labels</a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_registry_selector</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default node selector for automatically deploying registry pods. See
<a href="#configuring-node-host-labels">Configuring Node Host Labels</a> for details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_docker_options</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable configures additional Docker options within <strong><em>/etc/sysconfig/docker</em></strong>, such as
options used in <a href="../../install_config/install/prerequisites.html#managing-docker-container-logs">Managing Docker Container Logs</a>.
Example usage: <strong>"--log-driver json-file --log-opt max-size=1M --log-opt max-file=3"</strong>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="configuring-cluster-variables"><a class="anchor" href="#configuring-cluster-variables"></a>Configuring Cluster Variables</h3>
<div class="paragraph">
<p>To assign environment variables during the Ansible install that apply more
globally to your OpenShift Origin cluster overall, indicate the desired variables in
the <strong><em>/etc/ansible/hosts</em></strong> file on separate, single lines within the <strong>[OSEv3:vars]</strong>
section. For example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">[OSEv3:vars]

openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider', 'filename': '/etc/origin/master/htpasswd'}]

openshift_master_default_subdomain=apps.test.example.com</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following table describes variables for use with the Ansible installer that
can be assigned cluster-wide:</p>
</div>
<table id="cluster-variables-table" class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Cluster Variables</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>ansible_ssh_user</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable sets the SSH user for the installer to use and defaults to
<strong>root</strong>. This user should allow SSH-based authentication
<a href="prerequisites.html#ensuring-host-access">without requiring a password</a>. If
using SSH key-based authentication, then the key should be managed by an SSH
agent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>ansible_sudo</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code><strong>ansible_ssh_user</strong></code> is not <strong>root</strong>, this variable must be set to <strong>true</strong> and
the user must be configured for passwordless <strong>sudo</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>containerized</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <strong>true</strong>, containerized OpenShift Origin services are run on all target master
and node hosts in the cluster instead of installed using RPM packages. If set to
<strong>false</strong> or unset, the default RPM method is used. RHEL Atomic Host requires the
containerized method, and is automatically selected for you based on the
detection of the <strong><em>/run/ostree-booted</em></strong> file. See
<a href="../../install_config/install/rpm_vs_containerized.html#install-config-install-rpm-vs-containerized">RPM vs
Containerized</a> for more details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_cluster_hostname</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable overrides the host name for the cluster, which defaults to the
host name of the master.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_cluster_public_hostname</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable overrides the public host name for the cluster, which defaults to
the host name of the master.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_cluster_method</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional. This variable defines the HA method when deploying multiple masters.
Supports the <code>native</code> method. See <a href="#multiple-masters">Multiple Masters</a> for
more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_rolling_restart_mode</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable enables rolling restarts of HA masters (i.e., masters are taken
down one at a time) when
<a href="../upgrading/automated_upgrades.html#running-the-upgrade-playbook-directly">running
the upgrade playbook directly</a>. It defaults to <code>services</code>, which allows rolling
restarts of services on the masters. It can instead be set to <code>system</code>, which
enables rolling, full system restarts and also works for single master clusters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>os_sdn_network_plugin_name</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable configures which
<a href="../../architecture/additional_concepts/sdn.html#architecture-additional-concepts-sdn">OpenShift Origin SDN plug-in</a> to
use for the pod network, which defaults to <strong>redhat/openshift-ovs-subnet</strong> for the
standard SDN plug-in. Set the variable to <strong>redhat/openshift-ovs-multitenant</strong> to
use the multitenant plug-in.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_identity_providers</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable overrides the
<a href="../../install_config/configuring_authentication.html#install-config-configuring-authentication">identity provider</a>, which
defaults to
<a href="../../install_config/configuring_authentication.html#DenyAllPasswordIdentityProvider">Deny
All</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_named_certificates</strong></code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="2"><p class="tableblock">These variables are used to configure <a href="../../install_config/certificate_customization.html#install-config-certificate-customization">custom certificates</a> which are deployed as part of the installation. See <a href="#advanced-install-custom-certificates">Configuring Custom Certificates</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_overwrite_named_certificates</strong></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_session_name</strong></code></p></td>
<td class="tableblock halign-left valign-middle" rowspan="4"><p class="tableblock">These variables override defaults for
<a href="../../install_config/configuring_authentication.html#session-options">session
options</a> in the OAuth configuration. See <a href="#advanced-install-session-options">Configuring Session Options</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_session_max_seconds</strong></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_session_auth_secrets</strong></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_session_encryption_secrets</strong></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_portal_net</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable configures the subnet in which
<a href="../../architecture/core_concepts/pods_and_services.html#services">services</a>
will be created within the
<a href="../../architecture/additional_concepts/sdn.html#architecture-additional-concepts-sdn">OpenShift Origin SDN</a>. This
network block should be a private block and must not conflict with any existing
network blocks in your infrastructure to which pods, nodes, or the master may
require access. Defaults to <strong>172.30.0.0/16</strong> and <strong>cannot</strong> be re-configured after
deployment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_master_default_subdomain</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable overrides the default subdomain to use for exposed
<a href="../../architecture/core_concepts/routes.html#architecture-core-concepts-routes">routes</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>osm_default_node_selector</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable overrides the node selector that projects will use by default
when placing pods.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>osm_cluster_network_cidr</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable overrides the
<a href="../../architecture/additional_concepts/sdn.html#sdn-design-on-masters">SDN
cluster network</a> CIDR block. This is the network from which pod IPs are
assigned. This network block should be a private block and must not conflict
with existing network blocks in your infrastructure to which pods, nodes, or the
master may require access. Defaults to <strong>10.128.0.0/14</strong> and <strong>cannot</strong> be arbitrarily
re-configured after deployment, although certain changes to it can be made in
the <a href="../configuring_sdn.html#configuring-the-pod-network-on-masters">SDN
master configuration</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>osm_host_subnet_length</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable specifies the size of the per host subnet allocated for pod IPs
by
<a href="../../architecture/additional_concepts/sdn.html#sdn-design-on-masters">OpenShift Origin
SDN</a>. Defaults to <strong>9</strong> which means that a subnet of size /23 is allocated to each
host; for example, given the default 10.128.0.0/14 cluster network, this will
allocate 10.128.0.0/23, 10.128.2.0/23, 10.128.4.0/23, and so on. This <strong>cannot</strong> be
re-configured after deployment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_node_proxy_mode</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable specifies the
<a href="../../architecture/core_concepts/pods_and_services.html#proxy-mode">service
proxy implementation</a> to use: either <strong>iptables</strong> for the pure-iptables
version (the default), or <strong>userspace</strong> for the userspace proxy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_docker_additional_registries</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift Origin adds the specified additional registry or registries to the
Docker configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_docker_insecure_registries</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift Origin adds the specified additional insecure registry or registries
to the Docker configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_docker_blocked_registries</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OpenShift Origin adds the specified blocked registry or registries to the Docker
configuration.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="advanced-install-configuring-global-proxy"><a class="anchor" href="#advanced-install-configuring-global-proxy"></a>Configuring Global Proxy Options</h3>
<div class="paragraph">
<p>If your hosts require use of a HTTP or HTTPS proxy in order to connect to
external hosts, there are many components that must be configured to use the
proxy, including masters, Docker, and builds. Node services only connect to the
master API requiring no external access and therefore do not need to be
configured to use a proxy.</p>
</div>
<div class="paragraph">
<p>In order to simplify this configuration, the following Ansible variables can be
specified at a cluster or host level to apply these settings uniformly across
your environment.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>See <a href="../../install_config/build_defaults_overrides.html#install-config-build-defaults-overrides">Configuring
Global Build Defaults and Overrides</a> for more information on how the proxy
environment is defined for builds.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 3. Cluster Proxy Variables</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_http_proxy</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable specifies the <code><strong>HTTP_PROXY</strong></code> environment variable for masters and
the Docker daemon.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_https_proxy</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable specifices the <code><strong>HTTPS_PROXY</strong></code> environment variable for masters
and the Docker daemon.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_no_proxy</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable is used to set the <code><strong>NO_PROXY</strong></code> environment variable for masters
and the Docker daemon. This value should be set to a comma separated list of
host names or wildcard host names that should not use the defined proxy. This
list will be augmented with the list of all defined OpenShift Origin host names
by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_generate_no_proxy_hosts</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This boolean variable specifies whether or not the names of all defined
OpenShift hosts and <code>*.cluster.local</code> should be automatically appended to
the <code><strong>NO_PROXY</strong></code> list. Defaults to <strong>true</strong>; set it to <strong>false</strong> to override this
option.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_builddefaults_http_proxy</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable defines the <code><strong>HTTP_PROXY</strong></code> environment variable inserted into
builds using the <code><strong>BuildDefaults</strong></code> admission controller. If
<code><strong>openshift_http_proxy</strong></code> is set, this variable will inherit that value; you only
need to set this if you want your builds to use a different value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_builddefaults_https_proxy</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable defines the <code><strong>HTTPS_PROXY</strong></code> environment variable inserted into
builds using the <code><strong>BuildDefaults</strong></code> admission controller. If
<code><strong>openshift_https_proxy</strong></code> is set, this variable will inherit that value; you
only need to set this if you want your builds to use a different value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_builddefaults_no_proxy</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable defines the <code><strong>NO_PROXY</strong></code> environment variable inserted into
builds using the <code><strong>BuildDefaults</strong></code> admission controller. If
<code><strong>openshift_no_proxy</strong></code> is set, this variable will inherit that value; you only
need to set this if you want your builds to use a different value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_builddefaults_git_http_proxy</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable defines the HTTP proxy used by <code>git clone</code> operations during a
build, defined using the <code><strong>BuildDefaults</strong></code> admission controller. If
<code><strong>openshift_builddefaults_http_proxy</strong></code> is set, this variable will inherit that
value; you only need to set this if you want your <code>git clone</code> operations to use
a different value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><strong>openshift_builddefaults_git_https_proxy</strong></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This variable defines the HTTPS proxy used by <code>git clone</code> operations during a
build, defined using the <code><strong>BuildDefaults</strong></code> admission controller. If
<code><strong>openshift_builddefaults_https_proxy</strong></code> is set, this variable will inherit that
value; you only need to set this if you want your <code>git clone</code> operations to use
a different value.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="configuring-node-host-labels"><a class="anchor" href="#configuring-node-host-labels"></a>Configuring Node Host Labels</h3>
<div class="paragraph">
<p>You can assign
<a href="../../architecture/core_concepts/pods_and_services.html#labels">labels</a> to
node hosts during the Ansible install by configuring the <strong><em>/etc/ansible/hosts</em></strong>
file. Labels are useful for determining the placement of pods onto nodes using
the <a href="../../admin_guide/scheduler.html#configurable-predicates">scheduler</a>.
Other than <strong>region=infra</strong> (discussed below), the actual label names and values
are arbitrary and can be assigned however you see fit per your cluster&#8217;s
requirements.</p>
</div>
<div class="paragraph">
<p>To assign labels to a node host during an Ansible install, use the
<code><strong>openshift_node_labels</strong></code> variable with the desired labels added to the desired
node host entry in the <strong>[nodes]</strong> section. In the following example, labels are
set for a region called <strong>primary</strong> and a zone called <strong>east</strong>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">[nodes]
node1.example.com openshift_node_labels="{'region': 'primary', 'zone': 'east'}"</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code><strong>openshift_router_selector</strong></code> and <code><strong>openshift_registry_selector</strong></code> Ansible
settings are set to <strong>region=infra</strong> by default:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap"># default selectors for router and registry services
# openshift_router_selector='region=infra'
# openshift_registry_selector='region=infra'</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The default router and registry will be automatically deployed if nodes exist
that match the selector settings above. For example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">[nodes]
node1.example.com openshift_node_labels="{'region':'infra','zone':'default'}"</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="marking-masters-as-unschedulable-nodes"><a class="anchor" href="#marking-masters-as-unschedulable-nodes"></a>Marking Masters as Unschedulable Nodes</h3>
<div class="paragraph">
<p>Any hosts you designate as masters during the installation process should also
be configured as nodes by adding them to the <strong>[nodes]</strong> section so that the
masters are configured as part of the
<a href="../../architecture/additional_concepts/networking.html#openshift-sdn">OpenShift Origin
SDN</a>.</p>
</div>
<div class="paragraph">
<p>However, in order to ensure that your masters are not burdened with running
pods, you can make them
<a href="../../admin_guide/manage_nodes.html#marking-nodes-as-unschedulable-or-schedulable">unschedulable</a>
by adding the <code><strong>openshift_scheduleable=false</strong></code> option any node that is also a
master. For example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">[nodes]
master.example.com openshift_node_labels="{'region':'infra','zone':'default'}" openshift_schedulable=false</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="advanced-install-session-options"><a class="anchor" href="#advanced-install-session-options"></a>Configuring Session Options</h3>
<div class="paragraph">
<p><a href="../../install_config/configuring_authentication.html#session-options">Session
options</a> in the OAuth configuration are configurable in the inventory file. By
default, Ansible populates a <code><strong>sessionSecretsFile</strong></code> with generated
authentication and encryption secrets so that sessions generated by one master
can be decoded by the others. The default location is
<strong><em>/etc/origin/master/session-secrets.yaml</em></strong>, and this file will only be
re-created if deleted on all masters.</p>
</div>
<div class="paragraph">
<p>You can set the session name and maximum number of seconds with
<code><strong>openshift_master_session_name</strong></code> and <code><strong>openshift_master_session_max_seconds</strong></code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">openshift_master_session_name=ssn
openshift_master_session_max_seconds=3600</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If provided, <code><strong>openshift_master_session_auth_secrets</strong></code> and
<code><strong>openshift_master_encryption_secrets</strong></code> must be equal length.</p>
</div>
<div class="paragraph">
<p>For <code><strong>openshift_master_session_auth_secrets</strong></code>, used to authenticate sessions
using HMAC, it is recommended to use secrets with 32 or 64 bytes:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">openshift_master_session_auth_secrets=['DONT+USE+THIS+SECRET+b4NV+pmZNSO']</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For <code><strong>openshift_master_encryption_secrets</strong></code>, used to encrypt sessions, secrets
must be 16, 24, or 32 characters long, to select AES-128, AES-192, or AES-256:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">openshift_master_session_encryption_secrets=['DONT+USE+THIS+SECRET+b4NV+pmZNSO']</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="advanced-install-custom-certificates"><a class="anchor" href="#advanced-install-custom-certificates"></a>Configuring Custom Certificates</h3>
<div class="paragraph">
<p><a href="../../install_config/certificate_customization.html#install-config-certificate-customization">Custom serving
certificates</a> for the public host names of the OpenShift Origin API and
<a href="../../architecture/infrastructure_components/web_console.html#architecture-infrastructure-components-web-console">web console</a>
can be deployed during an advanced installation and are configurable in the
inventory file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Custom certificates should only be configured for the host name associated with
the <code><strong>publicMasterURL</strong></code> which can be set using
<code><strong>openshift_master_cluster_public_hostname</strong></code>. Using a custom serving certificate
for the host name associated with the <code><strong>masterURL</strong></code>
(<strong><code>openshift_master_cluster_hostname</code></strong>) will result in TLS errors as
infrastructure components will attempt to contact the master API using the
internal <code><strong>masterURL</strong></code> host.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Certificate and key file paths can be configured using the
<code><strong>openshift_master_named_certificates</strong></code> cluster variable:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">openshift_master_named_certificates=[{"certfile": "/path/to/custom1.crt", "keyfile": "/path/to/custom1.key"}]</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>File paths must be local to the system where Ansible will be run. Certificates
are copied to master hosts and are deployed within the
<strong><em>/etc/origin/master/named_certificates/</em></strong> directory.</p>
</div>
<div class="paragraph">
<p>Ansible detects a certificate&#8217;s <code>Common Name</code> and <code>Subject Alternative Names</code>.
Detected names can be overridden by providing the <code><strong>"names"</strong></code> key when setting
<code><strong>openshift_master_named_certificates</strong></code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">openshift_master_named_certificates=[{"certfile": "/path/to/custom1.crt", "keyfile": "/path/to/custom1.key", "names": ["public-master-host.com"]}]</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Certificates configured using <code><strong>openshift_master_named_certificates</strong></code> are cached
on masters, meaning that each additional Ansible run with a different set of
certificates results in all previously deployed certificates remaining in place
on master hosts and within the master configuration file.</p>
</div>
<div class="paragraph">
<p>If you would like <code><strong>openshift_master_named_certificates</strong></code> to be overwritten with
the provided value (or no value), specify the
<code><strong>openshift_master_overwrite_named_certificates</strong></code> cluster variable:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">openshift_master_overwrite_named_certificates=true</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For a more complete example, consider the following cluster variables in an
inventory file:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">openshift_master_cluster_method=native
openshift_master_cluster_hostname=lb.openshift.com
openshift_master_cluster_public_hostname=custom.openshift.com</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To overwrite the certificates on a subsequent Ansible run, you could set the
following:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">openshift_master_named_certificates=[{"certfile": "/root/STAR.openshift.com.crt", "keyfile": "/root/STAR.openshift.com.key", "names": ["custom.openshift.com"]}]
openshift_master_overwrite_named_certificates=true</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="single-master"><a class="anchor" href="#single-master"></a>Single Master Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can configure an environment with a single master and multiple nodes, and
either a single embedded <strong>etcd</strong> or multiple external <strong>etcd</strong> hosts.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Moving from a single master cluster to multiple masters after installation is
not supported.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="single-master-multi-node" class="paragraph">
<p><strong>Single Master and Multiple Nodes</strong></p>
</div>
<div class="paragraph">
<p>The following table describes an example environment for a single
<a href="../../architecture/infrastructure_components/kubernetes_infrastructure.html#master">master</a> (with embedded <strong>etcd</strong>)
and two
<a href="../../architecture/infrastructure_components/kubernetes_infrastructure.html#node">nodes</a>:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Host Name</th>
<th class="tableblock halign-left valign-top">Infrastructure Component to Install</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>master.example.com</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Master and node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>node1.example.com</strong></p></td>
<td class="tableblock halign-left valign-middle" rowspan="2"><p class="tableblock">Node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>node2.example.com</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can see these example hosts present in the <strong>[masters]</strong> and <strong>[nodes]</strong>
sections of the following example inventory file:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Single Master and Multiple Nodes Inventory File</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap"># Create an OSEv3 group that contains the masters and nodes groups
[OSEv3:children]
masters
nodes

# Set variables common for all OSEv3 hosts
[OSEv3:vars]
# SSH user, this user should allow ssh based auth without requiring a password
ansible_ssh_user=root

# If ansible_ssh_user is not root, ansible_sudo must be set to true
#ansible_sudo=true

deployment_type=origin

# uncomment the following to enable htpasswd authentication; defaults to DenyAllPasswordIdentityProvider
#openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider', 'filename': '/etc/origin/master/htpasswd'}]

# host group for masters
[masters]
master.example.com

# host group for nodes, includes region info
[nodes]
master.example.com openshift_node_labels="{'region': 'infra', 'zone': 'default'}"
node1.example.com openshift_node_labels="{'region': 'primary', 'zone': 'east'}"
node2.example.com openshift_node_labels="{'region': 'primary', 'zone': 'west'}"</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To use this example, modify the file to match your environment and
specifications, and save it as <strong><em>/etc/ansible/hosts</em></strong>.</p>
</div>
<div id="single-master-multi-etcd-multi-node" class="paragraph">
<p><strong>Single Master, Multiple etcd, and Multiple Nodes</strong></p>
</div>
<div class="paragraph">
<p>The following table describes an example environment for a single
<a href="../../architecture/infrastructure_components/kubernetes_infrastructure.html#master">master</a>,
three
<a href="../../architecture/infrastructure_components/kubernetes_infrastructure.html#master"><strong>etcd</strong></a>
hosts, and two
<a href="../../architecture/infrastructure_components/kubernetes_infrastructure.html#node">nodes</a>:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Host Name</th>
<th class="tableblock halign-left valign-top">Infrastructure Component to Install</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>master.example.com</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Master and node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>etcd1.example.com</strong></p></td>
<td class="tableblock halign-left valign-middle" rowspan="3"><p class="tableblock"><strong>etcd</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>etcd2.example.com</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>etcd3.example.com</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>node1.example.com</strong></p></td>
<td class="tableblock halign-left valign-middle" rowspan="2"><p class="tableblock">Node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>node2.example.com</strong></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When specifying multiple <strong>etcd</strong> hosts, external <strong>etcd</strong> is installed and
configured. Clustering of OpenShift Origin&#8217;s embedded <strong>etcd</strong> is not supported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can see these example hosts present in the <strong>[masters]</strong>, <strong>[nodes]</strong>, and
<strong>[etcd]</strong> sections of the following example inventory file:</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Single Master, Multiple etcd, and Multiple Nodes Inventory File</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap"># Create an OSEv3 group that contains the masters, nodes, and etcd groups
[OSEv3:children]
masters
nodes
etcd

# Set variables common for all OSEv3 hosts
[OSEv3:vars]
ansible_ssh_user=root
deployment_type=origin

# uncomment the following to enable htpasswd authentication; defaults to DenyAllPasswordIdentityProvider
#openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider', 'filename': '/etc/origin/master/htpasswd'}]

# host group for masters
[masters]
master.example.com

# host group for etcd
[etcd]
etcd1.example.com
etcd2.example.com
etcd3.example.com

# host group for nodes, includes region info
[nodes]
master.example.com openshift_node_labels="{'region': 'infra', 'zone': 'default'}"
node1.example.com openshift_node_labels="{'region': 'primary', 'zone': 'east'}"
node2.example.com openshift_node_labels="{'region': 'primary', 'zone': 'west'}"</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To use this example, modify the file to match your environment and
specifications, and save it as <strong><em>/etc/ansible/hosts</em></strong>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="multiple-masters"><a class="anchor" href="#multiple-masters"></a>Multiple Masters Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can configure an environment with multiple masters, multiple <strong>etcd</strong> hosts,
and multiple nodes. Configuring
<a href="../../architecture/infrastructure_components/kubernetes_infrastructure.html#high-availability-masters">multiple
masters for high availability</a> (HA) ensures that the cluster has no single point
of failure.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Moving from a single master cluster to multiple masters after installation is
not supported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When configuring multiple masters, the advanced installation supports the following high
availability (HA) method:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>native</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Leverages the native HA master capabilities built into OpenShift Origin and can be
combined with any load balancing solution. If a host is defined in the <strong>[lb]</strong>
section of the inventory file, Ansible installs and configures HAProxy
automatically as the load balancing solution. If no host is defined, it is
assumed you have pre-configured a load balancing solution of your choice to
balance the master API (port 8443) on all master hosts.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For more on the high availability master architecture, see
<a href="../../architecture/infrastructure_components/kubernetes_infrastructure.html#master">Kubernetes
Infrastructure</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To configure multiple masters, refer to the following section.</p>
</div>
<div id="multi-masters-using-native-ha" class="paragraph">
<p><strong>Multiple Masters Using Native HA</strong></p>
</div>
<div class="paragraph">
<p>The following describes an example environment for three
<a href="../../architecture/infrastructure_components/kubernetes_infrastructure.html#master">masters</a>,
one HAProxy load balancer, three
<a href="../../architecture/infrastructure_components/kubernetes_infrastructure.html#master"><strong>etcd</strong></a>
hosts, and two
<a href="../../architecture/infrastructure_components/kubernetes_infrastructure.html#node">nodes</a>
using the <code>native</code> HA method:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Host Name</th>
<th class="tableblock halign-left valign-top">Infrastructure Component to Install</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>master1.example.com</strong></p></td>
<td class="tableblock halign-left valign-middle" rowspan="3"><p class="tableblock">Master (clustered using native HA) and node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>master2.example.com</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>master3.example.com</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>lb.example.com</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HAProxy to load balance API master endpoints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>etcd1.example.com</strong></p></td>
<td class="tableblock halign-left valign-middle" rowspan="3"><p class="tableblock"><strong>etcd</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>etcd2.example.com</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>etcd3.example.com</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>node1.example.com</strong></p></td>
<td class="tableblock halign-left valign-middle" rowspan="2"><p class="tableblock">Node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>node2.example.com</strong></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When specifying multiple <strong>etcd</strong> hosts, external <strong>etcd</strong> is installed and
configured. Clustering of OpenShift Origin&#8217;s embedded <strong>etcd</strong> is not supported.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can see these example hosts present in the <strong>[masters]</strong>, <strong>[etcd]</strong>, <strong>[lb]</strong>,
and <strong>[nodes]</strong> sections of the following example inventory file:</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Multiple Masters Using HAProxy Inventory File</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap"># Create an OSEv3 group that contains the master, nodes, etcd, and lb groups.
# The lb group lets Ansible configure HAProxy as the load balancing solution.
# Comment lb out if your load balancer is pre-configured.
[OSEv3:children]
masters
nodes
etcd
lb

# Set variables common for all OSEv3 hosts
[OSEv3:vars]
ansible_ssh_user=root
deployment_type=origin

# Uncomment the following to enable htpasswd authentication; defaults to
# DenyAllPasswordIdentityProvider.
#openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider', 'filename': '/etc/origin/master/htpasswd'}]

# Native high availbility cluster method with optional load balancer.
# If no lb group is defined installer assumes that a load balancer has
# been preconfigured. For installation the value of
# openshift_master_cluster_hostname must resolve to the load balancer
# or to one or all of the masters defined in the inventory if no load
# balancer is present.
openshift_master_cluster_method=native
openshift_master_cluster_hostname=openshift-cluster.example.com
openshift_master_cluster_public_hostname=openshift-cluster.example.com

# override the default controller lease ttl
#osm_controller_lease_ttl=30

# host group for masters
[masters]
master1.example.com
master2.example.com
master3.example.com

# host group for etcd
[etcd]
etcd1.example.com
etcd2.example.com
etcd3.example.com

# Specify load balancer host
[lb]
lb.example.com

# host group for nodes, includes region info
[nodes]
master[1:3].example.com openshift_node_labels="{'region': 'infra', 'zone': 'default'}"
node1.example.com openshift_node_labels="{'region': 'primary', 'zone': 'east'}"
node2.example.com openshift_node_labels="{'region': 'primary', 'zone': 'west'}"</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To use this example, modify the file to match your environment and
specifications, and save it as <strong><em>/etc/ansible/hosts</em></strong>.</p>
</div>
<div class="paragraph">
<p>Note the following when using the <code>native</code> HA method:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The advanced installation method does not currently support multiple HAProxy
load balancers in an active-passive setup. See the
<a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Load_Balancer_Administration/ch-lvs-overview-VSA.html">Load
Balancer Administration documentation</a> for post-installation amendments.</p>
</li>
<li>
<p>In a HAProxy setup, controller manager servers run as standalone processes.
They elect their active leader with a lease stored in <strong>etcd</strong>. The lease
expires after 30 seconds by default. If a failure happens on an active
controller server, it will take up to this number of seconds to elect another
leader. The interval can be configured with the <code><strong>osm_controller_lease_ttl</strong></code>
variable.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="running-the-advanced-installation"><a class="anchor" href="#running-the-advanced-installation"></a>Running the Advanced Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you have <a href="#configuring-ansible">configured Ansible</a> by defining an
inventory file in <strong><em>/etc/ansible/hosts</em></strong>, you can run the advanced installation
using the following playbook:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ansible-playbook ~/openshift-ansible/playbooks/byo/config.yml</pre>
</div>
</div>
<div class="paragraph">
<p>If for any reason the installation fails, before re-running the installer, see
<a href="#installer-known-issues">Known Issues</a> to check for any specific
instructions or workarounds.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-verifying-the-installation"><a class="anchor" href="#advanced-verifying-the-installation"></a>Verifying the Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After the installation completes, verify that the master is started and nodes
are registered and reporting in <strong>Ready</strong> status. <strong>On the master host</strong>, run the
following as root:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap"># oc get nodes

NAME                      LABELS                                                                     STATUS
master.example.com        kubernetes.io/hostname=master.example.com,region=infra,zone=default        Ready,SchedulingDisabled
node1.example.com         kubernetes.io/hostname=node1.example.com,region=primary,zone=east          Ready
node2.example.com         kubernetes.io/hostname=node2.example.com,region=primary,zone=west          Ready</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p><strong>Multiple etcd Hosts</strong></p>
</div>
<div class="paragraph">
<p>If you installed multiple <strong>etcd</strong> hosts:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On a master host, verify the <strong>etcd</strong> cluster health, substituting for the FQDNs
of your <strong>etcd</strong> hosts in the following:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap"># etcdctl -C \
    https://etcd1.example.com:2379,https://etcd2.example.com:2379,https://etcd3.example.com:2379 \
    --ca-file=/etc/origin/master/master.etcd-ca.crt \
    --cert-file=/etc/origin/master/master.etcd-client.crt \
    --key-file=/etc/origin/master/master.etcd-client.key cluster-health</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Also verify the member list is correct:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap"># etcdctl -C \
    https://etcd1.example.com:2379,https://etcd2.example.com:2379,https://etcd3.example.com:2379 \
    --ca-file=/etc/origin/master/master.etcd-ca.crt \
    --cert-file=/etc/origin/master/master.etcd-client.crt \
    --key-file=/etc/origin/master/master.etcd-client.key member list</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Multiple Masters Using HAProxy</strong></p>
</div>
<div class="paragraph">
<p>If you installed multiple masters using HAProxy as a load balancer, browse to
the following URL according to your <strong>[lb]</strong> section definition and check
HAProxy&#8217;s status:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">http://&lt;lb_hostname&gt;:9000</pre>
</div>
</div>
<div class="paragraph">
<p>You can verify your installation by consulting the
<a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Load_Balancer_Administration/ch-haproxy-setup-VSA.html">HAProxy
Configuration documentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-nodes-advanced"><a class="anchor" href="#adding-nodes-advanced"></a>Adding Nodes to an Existing Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After your cluster is installed, you can install additional nodes (including
masters) and add them to your cluster by running the <strong><em>scaleup.yml</em></strong> playbook.
This playbook queries the master, generates and distributes new certificates for
the new nodes, then runs the configuration playbooks on the new nodes only.</p>
</div>
<div class="paragraph">
<p>You must have an existing inventory file (for example, <strong><em>/etc/ansible/hosts</em></strong>)
that is representative of your current cluster configuration in order to run the
<strong><em>scaleup.yml</em></strong> playbook.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The recommended maximum number of nodes is 300.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To add nodes to an existing cluster:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure you have the latest playbooks by updating the <strong>atomic-openshift-utils</strong>
package:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># yum update atomic-openshift-utils</pre>
</div>
</div>
</li>
<li>
<p>Edit your <strong><em>/etc/ansible/hosts</em></strong> file and add <code>new_nodes</code> to the
<strong>[OSEv3:children]</strong> section:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">[OSEv3:children]
masters
nodes
new_nodes</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Then, create a <strong>[new_nodes]</strong> section much like the existing <strong>[nodes]</strong> section,
specifying host information for any new nodes you want to add. For example:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">[nodes]
master[1:3].example.com openshift_node_labels="{'region': 'infra', 'zone': 'default'}"
node1.example.com openshift_node_labels="{'region': 'primary', 'zone': 'east'}"
node2.example.com openshift_node_labels="{'region': 'primary', 'zone': 'west'}"

[new_nodes]
node3.example.com openshift_node_labels="{'region': 'primary', 'zone': 'west'}"</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>See <a href="#advanced-host-variables">Configuring Host Variables</a> for more options.</p>
</div>
</li>
<li>
<p>Now run the <strong><em>scaleup.yml</em></strong> playbook. If your inventory file is located
somewhere other than the default <strong><em>/etc/ansible/hosts</em></strong>, specify the location
with the <code>-i option</code>:</p>
<div class="paragraph">
<p>For additional nodes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ansible-playbook [-i /path/to/file] \
    /usr/share/ansible/openshift-ansible/playbooks/byo/openshift-node/scaleup.yml</pre>
</div>
</div>
<div class="paragraph">
<p>For additional masters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ansible-playbook [-i /path/to/file] \
    usr/share/ansible/openshift-ansible/playbooks/byo/openshift-master/scaleup.yml</pre>
</div>
</div>
</li>
<li>
<p>After the playbook completes successfully,
<a href="#advanced-verifying-the-installation">verify the installation</a>.</p>
</li>
<li>
<p>Finally, move any hosts you had defined in the <strong>[new_nodes]</strong> section up into
the <strong>[nodes]</strong> section (but leave the <strong>[new_nodes]</strong> section definition itself in
place) so that subsequent runs using this inventory file are aware of the nodes
but do not handle them as new nodes. For example:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">[nodes]
master[1:3].example.com openshift_node_labels="{'region': 'infra', 'zone': 'default'}"
node1.example.com openshift_node_labels="{'region': 'primary', 'zone': 'east'}"
node2.example.com openshift_node_labels="{'region': 'primary', 'zone': 'west'}"
node3.example.com openshift_node_labels="{'region': 'primary', 'zone': 'west'}"

[new_nodes]</pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="uninstalling-advanced"><a class="anchor" href="#uninstalling-advanced"></a>Uninstalling OpenShift Origin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can uninstall OpenShift Origin hosts in your cluster by running the
<strong><em>uninstall.yml</em></strong> playbook. This playbook deletes OpenShift Origin content
installed by Ansible, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configuration</p>
</li>
<li>
<p>Containers</p>
</li>
<li>
<p>Default templates and image streams</p>
</li>
<li>
<p>Images</p>
</li>
<li>
<p>RPM packages</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The playbook will delete content for any hosts defined in the inventory file
that you specify when running the playbook. If you want to uninstall
OpenShift Origin across all hosts in your cluster, run the playbook using the
inventory file you used when installing OpenShift Origin initially or ran most
recently:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ansible-playbook [-i /path/to/file] \
    ~/openshift-ansible/playbooks/adhoc/uninstall.yml</pre>
</div>
</div>
<div class="sect2">
<h3 id="uninstalling-nodes-advanced"><a class="anchor" href="#uninstalling-nodes-advanced"></a>Uninstalling Nodes</h3>
<div class="paragraph">
<p>You can also uninstall node components from specific hosts using the
<strong><em>uninstall.yml</em></strong> playbook while leaving the remaining hosts and cluster alone:</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This method should only be used when attempting to uninstall specific node hosts
and not for specific masters or etcd hosts, which would require further
configuration changes within the cluster.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First follow the steps in
<a href="../../admin_guide/manage_nodes.html#deleting-nodes">Deleting Nodes</a> to
remove the node object from the cluster, then continue with the remaining steps
in this procedure.</p>
</li>
<li>
<p>Create a different inventory file that only references those hosts. For
example, to only delete content from one node:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="nowrap">[OSEv3:children]
nodes <i class="conum" data-value="1"></i><b>(1)</b>

[OSEv3:vars]
ansible_ssh_user=root
deployment_type=origin

[nodes]
node3.example.com openshift_node_labels="{'region': 'primary', 'zone': 'west'}" <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Only include the sections that pertain to the hosts you are interested in
uninstalling.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Only include hosts that you want to uninstall.</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>Specify that new inventory file using the <code>-i</code> option when running the
<strong><em>uninstall.yml</em></strong> playbook:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># ansible-playbook -i /path/to/new/file \
    ~/openshift-ansible/playbooks/adhoc/uninstall.yml</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>When the playbook completes, all OpenShift Origin content should be removed from
any specified hosts.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installer-known-issues"><a class="anchor" href="#installer-known-issues"></a>Known Issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following are known issues for specified installation configurations.</p>
</div>
<div class="paragraph">
<p><strong>Multiple Masters</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>On failover, it is possible for the controller manager to overcorrect, which
causes the system to run more pods than what was intended. However, this is a
transient event and the system does correct itself over time. See
<a href="https://github.com/GoogleCloudPlatform/kubernetes/issues/10030" class="bare">https://github.com/GoogleCloudPlatform/kubernetes/issues/10030</a> for details.</p>
</li>
<li>
<p>On failure of the Ansible installer, you must start from a clean operating
system installation. If you are using virtual machines, start from a fresh
image. If you are using bare metal machines, run the following on all hosts:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"># yum -y remove openshift openshift-* etcd docker

# rm -rf /etc/origin /var/lib/openshift /etc/etcd \
    /var/lib/etcd /etc/sysconfig/atomic-openshift* /etc/sysconfig/docker* \
    /root/.kube/config /etc/ansible/facts.d /usr/share/openshift</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-s-next"><a class="anchor" href="#what-s-next"></a>What&#8217;s Next?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have a working OpenShift Origin instance, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../../install_config/configuring_authentication.html#install-config-configuring-authentication">Configure
authentication</a>; by default, authentication is set to
<a href="../../install_config/configuring_authentication.html#AllowAllPasswordIdentityProvider">Allow
All</a>.</p>
</li>
<li>
<p>Deploy an <a href="docker_registry.html#install-config-install-docker-registry">integrated Docker registry</a>.</p>
</li>
<li>
<p>Deploy a <a href="deploy_router.html#install-config-install-deploy-router">router</a>.</p>
</li>
<li>
<p><a href="../../install_config/imagestreams_templates.html#install-config-imagestreams-templates">Populate your OpenShift Origin installation</a>
with a useful set of Red Hat-provided image streams and templates.</p>
</li>
</ul>
</div>
</div>
</div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
    <footer class="footer-origin-docs">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <div id="footer_social">
          <a href="https://twitter.com/openshift" class="first">
            <span>
              <i class="fa fa-twitter-square fa-2x fa-inverse"></i>
            </span>
          </a>
          <a href="https://github.com/openshift/origin">
            <span>
              <i class="fa fa-github fa-2x fa-inverse"></i>
            </span>
          </a>
          <a href="https://plus.google.com/communities/114361859072744017486">
            <span>
              <i class="fa fa-google-plus-square fa-2x fa-inverse"></i>
            </span>
          </a>
          <a href="https://www.facebook.com/openshift">
            <span>
              <i class="fa fa-facebook-square fa-2x fa-inverse"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-sm-4">
        <a id="footer_logo" href="https://www.redhat.com/">
          <img alt="Red Hat" src="https://assets.openshift.net/app/assets/redhat.svg">
        </a>
      </div>
      <div class="col-xs-12 col-sm-4 text-center">
        <a id="powered_by_openshift" title="Powered by OpenShift Online with the DIY Cartridge" href="https://hub.openshift.com/quickstarts/92-do-it-yourself-0-1">
          <img src="https://www.openshift.com/sites/default/files/images/powered-transparent-white.png" alt="Powered by OpenShift Online">
        </a>
      </div>
      <div class="col-xs-12 col-sm-4 text-right">
        <a id="built_with_asciibinder" title="Built with AsciiBinder docs management system" href="http://asciibinder.org/">
          <img src="../../../scollier-test/_images/asciibinder_web_logo.svg" alt="AsciiBinder">
        </a>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <div class="attribution">
          <button type="button" class="btn btn-link" data-html="true" data-container="body" data-toggle="popover" data-placement="top" data-content="
            '<a target='_blank' href='https://www.flickr.com/photos/eflon/3655695161/'>Spin</a>' by <a target='_blank' href='https://www.flickr.com/photos/eflon/'>eflon</a>,</br> used under <a target='_blank' href='https://creativecommons.org/licenses/by/2.0/'>CC BY 2.0</a> </br>Color tint added to original">
            Image attribution
          </button>
        </div>
      </div>
    </div>
    <script>
    $(function () {
      $('[data-toggle="popover"]').popover()
    })
    </script>
  </div>
</footer>
</body>
</html>